if(!window.System){ /*
* SJS 6.10.1
* Minimal SystemJS Build
*/
(function () {

  function errMsg(errCode, msg) {
    return (msg || "") + " (SystemJS https://git.io/JvFET#" + errCode + ")";
  }

  var hasSymbol = typeof Symbol !== 'undefined';
  var hasSelf = typeof self !== 'undefined';
  var hasDocument = typeof document !== 'undefined';

  var envGlobal = hasSelf ? self : global;

  var baseUrl;

  if (hasDocument) {
    var baseEl = document.querySelector('base[href]');
    if (baseEl)
      baseUrl = baseEl.href;
  }

  if (!baseUrl && typeof location !== 'undefined') {
    baseUrl = location.href.split('#')[0].split('?')[0];
    var lastSepIndex = baseUrl.lastIndexOf('/');
    if (lastSepIndex !== -1)
      baseUrl = baseUrl.slice(0, lastSepIndex + 1);
  }

  var backslashRegEx = /\\/g;
  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {
    if (relUrl.indexOf('\\') !== -1)
      relUrl = relUrl.replace(backslashRegEx, '/');
    // protocol-relative
    if (relUrl[0] === '/' && relUrl[1] === '/') {
      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;
    }
    // relative-url
    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||
        relUrl.length === 1  && (relUrl += '/')) ||
        relUrl[0] === '/') {
      var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);
      // Disabled, but these cases will give inconsistent results for deep backtracking
      //if (parentUrl[parentProtocol.length] !== '/')
      //  throw Error('Cannot resolve');
      // read pathname from parent URL
      // pathname taken to be part after leading "/"
      var pathname;
      if (parentUrl[parentProtocol.length + 1] === '/') {
        // resolving to a :// so we need to read out the auth and host
        if (parentProtocol !== 'file:') {
          pathname = parentUrl.slice(parentProtocol.length + 2);
          pathname = pathname.slice(pathname.indexOf('/') + 1);
        }
        else {
          pathname = parentUrl.slice(8);
        }
      }
      else {
        // resolving to :/ so pathname is the /... part
        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));
      }

      if (relUrl[0] === '/')
        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;

      // join together and split for removal of .. and . segments
      // looping the string instead of anything fancy for perf reasons
      // '../../../../../z' resolved to 'x/y' is just 'z'
      var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;

      var output = [];
      var segmentIndex = -1;
      for (var i = 0; i < segmented.length; i++) {
        // busy reading a segment - only terminate on '/'
        if (segmentIndex !== -1) {
          if (segmented[i] === '/') {
            output.push(segmented.slice(segmentIndex, i + 1));
            segmentIndex = -1;
          }
        }

        // new segment - check if it is relative
        else if (segmented[i] === '.') {
          // ../ segment
          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {
            output.pop();
            i += 2;
          }
          // ./ segment
          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {
            i += 1;
          }
          else {
            // the start of a new segment as below
            segmentIndex = i;
          }
        }
        // it is the start of a new segment
        else {
          segmentIndex = i;
        }
      }
      // finish reading out the last segment
      if (segmentIndex !== -1)
        output.push(segmented.slice(segmentIndex));
      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');
    }
  }

  /*
   * Import maps implementation
   *
   * To make lookups fast we pre-resolve the entire import map
   * and then match based on backtracked hash lookups
   *
   */

  function resolveUrl (relUrl, parentUrl) {
    return resolveIfNotPlainOrUrl(relUrl, parentUrl) || (relUrl.indexOf(':') !== -1 ? relUrl : resolveIfNotPlainOrUrl('./' + relUrl, parentUrl));
  }

  function resolveAndComposePackages (packages, outPackages, baseUrl, parentMap, parentUrl) {
    for (var p in packages) {
      var resolvedLhs = resolveIfNotPlainOrUrl(p, baseUrl) || p;
      var rhs = packages[p];
      // package fallbacks not currently supported
      if (typeof rhs !== 'string')
        continue;
      var mapped = resolveImportMap(parentMap, resolveIfNotPlainOrUrl(rhs, baseUrl) || rhs, parentUrl);
      if (!mapped) {
        targetWarning('W1', p, rhs);
      }
      else
        outPackages[resolvedLhs] = mapped;
    }
  }

  function resolveAndComposeImportMap (json, baseUrl, outMap) {
    if (json.imports)
      resolveAndComposePackages(json.imports, outMap.imports, baseUrl, outMap, null);

    var u;
    for (u in json.scopes || {}) {
      var resolvedScope = resolveUrl(u, baseUrl);
      resolveAndComposePackages(json.scopes[u], outMap.scopes[resolvedScope] || (outMap.scopes[resolvedScope] = {}), baseUrl, outMap, resolvedScope);
    }

    for (u in json.depcache || {})
      outMap.depcache[resolveUrl(u, baseUrl)] = json.depcache[u];
    
    for (u in json.integrity || {})
      outMap.integrity[resolveUrl(u, baseUrl)] = json.integrity[u];
  }

  function getMatch (path, matchObj) {
    if (matchObj[path])
      return path;
    var sepIndex = path.length;
    do {
      var segment = path.slice(0, sepIndex + 1);
      if (segment in matchObj)
        return segment;
    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)
  }

  function applyPackages (id, packages) {
    var pkgName = getMatch(id, packages);
    if (pkgName) {
      var pkg = packages[pkgName];
      if (pkg === null) return;
      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/') {
        targetWarning('W2', pkgName, pkg);
      }
      else
        return pkg + id.slice(pkgName.length);
    }
  }

  function targetWarning (code, match, target, msg) {
    console.warn(errMsg(code,  [target, match].join(', ') ));
  }

  function resolveImportMap (importMap, resolvedOrPlain, parentUrl) {
    var scopes = importMap.scopes;
    var scopeUrl = parentUrl && getMatch(parentUrl, scopes);
    while (scopeUrl) {
      var packageResolution = applyPackages(resolvedOrPlain, scopes[scopeUrl]);
      if (packageResolution)
        return packageResolution;
      scopeUrl = getMatch(scopeUrl.slice(0, scopeUrl.lastIndexOf('/')), scopes);
    }
    return applyPackages(resolvedOrPlain, importMap.imports) || resolvedOrPlain.indexOf(':') !== -1 && resolvedOrPlain;
  }

  /*
   * SystemJS Core
   * 
   * Provides
   * - System.import
   * - System.register support for
   *     live bindings, function hoisting through circular references,
   *     reexports, dynamic import, import.meta.url, top-level await
   * - System.getRegister to get the registration
   * - Symbol.toStringTag support in Module objects
   * - Hookable System.createContext to customize import.meta
   * - System.onload(err, id, deps) handler for tracing / hot-reloading
   * 
   * Core comes with no System.prototype.resolve or
   * System.prototype.instantiate implementations
   */

  var toStringTag = hasSymbol && Symbol.toStringTag;
  var REGISTRY = hasSymbol ? Symbol() : '@';

  function SystemJS () {
    this[REGISTRY] = {};
  }

  var systemJSPrototype = SystemJS.prototype;

  systemJSPrototype.import = function (id, parentUrl) {
    var loader = this;
    return Promise.resolve(loader.prepareImport())
    .then(function() {
      return loader.resolve(id, parentUrl);
    })
    .then(function (id) {
      var load = getOrCreateLoad(loader, id);
      return load.C || topLevelLoad(loader, load);
    });
  };

  // Hookable createContext function -> allowing eg custom import meta
  systemJSPrototype.createContext = function (parentId) {
    var loader = this;
    return {
      url: parentId,
      resolve: function (id, parentUrl) {
        return Promise.resolve(loader.resolve(id, parentUrl || parentId));
      }
    };
  };
  function loadToId (load) {
    return load.id;
  }
  function triggerOnload (loader, load, err, isErrSource) {
    loader.onload(err, load.id, load.d && load.d.map(loadToId), !!isErrSource);
    if (err)
      throw err;
  }

  var lastRegister;
  systemJSPrototype.register = function (deps, declare) {
    lastRegister = [deps, declare];
  };

  /*
   * getRegister provides the last anonymous System.register call
   */
  systemJSPrototype.getRegister = function () {
    var _lastRegister = lastRegister;
    lastRegister = undefined;
    return _lastRegister;
  };

  function getOrCreateLoad (loader, id, firstParentUrl) {
    var load = loader[REGISTRY][id];
    if (load)
      return load;

    var importerSetters = [];
    var ns = Object.create(null);
    if (toStringTag)
      Object.defineProperty(ns, toStringTag, { value: 'Module' });
    
    var instantiatePromise = Promise.resolve()
    .then(function () {
      return loader.instantiate(id, firstParentUrl);
    })
    .then(function (registration) {
      if (!registration)
        throw Error(errMsg(2,  id ));
      function _export (name, value) {
        // note if we have hoisted exports (including reexports)
        load.h = true;
        var changed = false;
        if (typeof name === 'string') {
          if (!(name in ns) || ns[name] !== value) {
            ns[name] = value;
            changed = true;
          }
        }
        else {
          for (var p in name) {
            var value = name[p];
            if (!(p in ns) || ns[p] !== value) {
              ns[p] = value;
              changed = true;
            }
          }

          if (name && name.__esModule) {
            ns.__esModule = name.__esModule;
          }
        }
        if (changed)
          for (var i = 0; i < importerSetters.length; i++) {
            var setter = importerSetters[i];
            if (setter) setter(ns);
          }
        return value;
      }
      var declared = registration[1](_export, registration[1].length === 2 ? {
        import: function (importId) {
          return loader.import(importId, id);
        },
        meta: loader.createContext(id)
      } : undefined);
      load.e = declared.execute || function () {};
      return [registration[0], declared.setters || []];
    }, function (err) {
      load.e = null;
      load.er = err;
      throw err;
    });

    var linkPromise = instantiatePromise
    .then(function (instantiation) {
      return Promise.all(instantiation[0].map(function (dep, i) {
        var setter = instantiation[1][i];
        return Promise.resolve(loader.resolve(dep, id))
        .then(function (depId) {
          var depLoad = getOrCreateLoad(loader, depId, id);
          // depLoad.I may be undefined for already-evaluated
          return Promise.resolve(depLoad.I)
          .then(function () {
            if (setter) {
              depLoad.i.push(setter);
              // only run early setters when there are hoisted exports of that module
              // the timing works here as pending hoisted export calls will trigger through importerSetters
              if (depLoad.h || !depLoad.I)
                setter(depLoad.n);
            }
            return depLoad;
          });
        });
      }))
      .then(function (depLoads) {
        load.d = depLoads;
      });
    });

    // Capital letter = a promise function
    return load = loader[REGISTRY][id] = {
      id: id,
      // importerSetters, the setters functions registered to this dependency
      // we retain this to add more later
      i: importerSetters,
      // module namespace object
      n: ns,

      // instantiate
      I: instantiatePromise,
      // link
      L: linkPromise,
      // whether it has hoisted exports
      h: false,

      // On instantiate completion we have populated:
      // dependency load records
      d: undefined,
      // execution function
      e: undefined,

      // On execution we have populated:
      // the execution error if any
      er: undefined,
      // in the case of TLA, the execution promise
      E: undefined,

      // On execution, L, I, E cleared

      // Promise for top-level completion
      C: undefined,

      // parent instantiator / executor
      p: undefined
    };
  }

  function instantiateAll (loader, load, parent, loaded) {
    if (!loaded[load.id]) {
      loaded[load.id] = true;
      // load.L may be undefined for already-instantiated
      return Promise.resolve(load.L)
      .then(function () {
        if (!load.p || load.p.e === null)
          load.p = parent;
        return Promise.all(load.d.map(function (dep) {
          return instantiateAll(loader, dep, parent, loaded);
        }));
      })
      .catch(function (err) {
        if (load.er)
          throw err;
        load.e = null;
        throw err;
      });
    }
  }

  function topLevelLoad (loader, load) {
    return load.C = instantiateAll(loader, load, load, {})
    .then(function () {
      return postOrderExec(loader, load, {});
    })
    .then(function () {
      return load.n;
    });
  }

  // the closest we can get to call(undefined)
  var nullContext = Object.freeze(Object.create(null));

  // returns a promise if and only if a top-level await subgraph
  // throws on sync errors
  function postOrderExec (loader, load, seen) {
    if (seen[load.id])
      return;
    seen[load.id] = true;

    if (!load.e) {
      if (load.er)
        throw load.er;
      if (load.E)
        return load.E;
      return;
    }

    // deps execute first, unless circular
    var depLoadPromises;
    load.d.forEach(function (depLoad) {
      try {
        var depLoadPromise = postOrderExec(loader, depLoad, seen);
        if (depLoadPromise) 
          (depLoadPromises = depLoadPromises || []).push(depLoadPromise);
      }
      catch (err) {
        load.e = null;
        load.er = err;
        throw err;
      }
    });
    if (depLoadPromises)
      return Promise.all(depLoadPromises).then(doExec);

    return doExec();

    function doExec () {
      try {
        var execPromise = load.e.call(nullContext);
        if (execPromise) {
          execPromise = execPromise.then(function () {
            load.C = load.n;
            load.E = null; // indicates completion
            if (!true) ;
          }, function (err) {
            load.er = err;
            load.E = null;
            if (!true) ;
            throw err;
          });
          return load.E = execPromise;
        }
        // (should be a promise, but a minify optimization to leave out Promise.resolve)
        load.C = load.n;
        load.L = load.I = undefined;
      }
      catch (err) {
        load.er = err;
        throw err;
      }
      finally {
        load.e = null;
      }
    }
  }

  envGlobal.System = new SystemJS();

  /*
   * SystemJS browser attachments for script and import map processing
   */

  var importMapPromise = Promise.resolve();
  var importMap = { imports: {}, scopes: {}, depcache: {}, integrity: {} };

  // Scripts are processed immediately, on the first System.import, and on DOMReady.
  // Import map scripts are processed only once (by being marked) and in order for each phase.
  // This is to avoid using DOM mutation observers in core, although that would be an alternative.
  var processFirst = hasDocument;
  systemJSPrototype.prepareImport = function (doProcessScripts) {
    if (processFirst || doProcessScripts) {
      processScripts();
      processFirst = false;
    }
    return importMapPromise;
  };
  if (hasDocument) {
    processScripts();
    window.addEventListener('DOMContentLoaded', processScripts);
  }

  function processScripts () {
    [].forEach.call(document.querySelectorAll('script'), function (script) {
      if (script.sp) // sp marker = systemjs processed
        return;
      // TODO: deprecate systemjs-module in next major now that we have auto import
      if (script.type === 'systemjs-module') {
        script.sp = true;
        if (!script.src)
          return;
        System.import(script.src.slice(0, 7) === 'import:' ? script.src.slice(7) : resolveUrl(script.src, baseUrl)).catch(function (e) {
          // if there is a script load error, dispatch an "error" event
          // on the script tag.
          if (e.message.indexOf('https://git.io/JvFET#3') > -1) {
            var event = document.createEvent('Event');
            event.initEvent('error', false, false);
            script.dispatchEvent(event);
          }
          return Promise.reject(e);
        });
      }
      else if (script.type === 'systemjs-importmap') {
        script.sp = true;
        var fetchPromise = script.src ? fetch(script.src, { integrity: script.integrity }).then(function (res) {
          if (!res.ok)
            throw Error( res.status );
          return res.text();
        }).catch(function (err) {
          err.message = errMsg('W4',  script.src ) + '\n' + err.message;
          console.warn(err);
          if (typeof script.onerror === 'function') {
              script.onerror();
          }
          return '{}';
        }) : script.innerHTML;
        importMapPromise = importMapPromise.then(function () {
          return fetchPromise;
        }).then(function (text) {
          extendImportMap(importMap, text, script.src || baseUrl);
        });
      }
    });
  }

  function extendImportMap (importMap, newMapText, newMapUrl) {
    var newMap = {};
    try {
      newMap = JSON.parse(newMapText);
    } catch (err) {
      console.warn(Error(( errMsg('W5')  )));
    }
    resolveAndComposeImportMap(newMap, newMapUrl, importMap);
  }

  /*
   * Script instantiation loading
   */

  if (hasDocument) {
    window.addEventListener('error', function (evt) {
      lastWindowErrorUrl = evt.filename;
      lastWindowError = evt.error;
    });
    var baseOrigin = location.origin;
  }

  systemJSPrototype.createScript = function (url) {
    var script = document.createElement('script');
    script.async = true;
    // Only add cross origin for actual cross origin
    // this is because Safari triggers for all
    // - https://bugs.webkit.org/show_bug.cgi?id=171566
    if (url.indexOf(baseOrigin + '/'))
      script.crossOrigin = 'anonymous';
    var integrity = importMap.integrity[url];
    if (integrity)
      script.integrity = integrity;
    script.src = url;
    return script;
  };

  // Auto imports -> script tags can be inlined directly for load phase
  var lastAutoImportUrl, lastAutoImportDeps, lastAutoImportTimeout;
  var autoImportCandidates = {};
  var systemRegister = systemJSPrototype.register;
  systemJSPrototype.register = function (deps, declare) {
    if (hasDocument && document.readyState === 'loading' && typeof deps !== 'string') {
      var scripts = document.querySelectorAll('script[src]');
      var lastScript = scripts[scripts.length - 1];
      if (lastScript) {
        lastAutoImportUrl = lastScript.src;
        lastAutoImportDeps = deps;
        // if this is already a System load, then the instantiate has already begun
        // so this re-import has no consequence
        var loader = this;
        lastAutoImportTimeout = setTimeout(function () {
          autoImportCandidates[lastScript.src] = [deps, declare];
          loader.import(lastScript.src);
        });
      }
    }
    else {
      lastAutoImportDeps = undefined;
    }
    return systemRegister.call(this, deps, declare);
  };

  var lastWindowErrorUrl, lastWindowError;
  systemJSPrototype.instantiate = function (url, firstParentUrl) {
    var autoImportRegistration = autoImportCandidates[url];
    if (autoImportRegistration) {
      delete autoImportCandidates[url];
      return autoImportRegistration;
    }
    var loader = this;
    return new Promise(function (resolve, reject) {
      var script = systemJSPrototype.createScript(url);
      script.addEventListener('error', function () {
        reject(Error(errMsg(3,  [url, firstParentUrl].join(', ') )));
      });
      script.addEventListener('load', function () {
        document.head.removeChild(script);
        // Note that if an error occurs that isn't caught by this if statement,
        // that getRegister will return null and a "did not instantiate" error will be thrown.
        if (lastWindowErrorUrl === url) {
          reject(lastWindowError);
        }
        else {
          var register = loader.getRegister();
          // Clear any auto import registration for dynamic import scripts during load
          if (register && register[0] === lastAutoImportDeps)
            clearTimeout(lastAutoImportTimeout);
          resolve(register);
        }
      });
      document.head.appendChild(script);
    });
  };

  /*
   * Fetch loader, sets up shouldFetch and fetch hooks
   */
  systemJSPrototype.shouldFetch = function () {
    return false;
  };
  if (typeof fetch !== 'undefined')
    systemJSPrototype.fetch = fetch;

  var instantiate = systemJSPrototype.instantiate;
  var jsContentTypeRegEx = /^(text|application)\/(x-)?javascript(;|$)/;
  systemJSPrototype.instantiate = function (url, parent) {
    var loader = this;
    if (!this.shouldFetch(url))
      return instantiate.apply(this, arguments);
    return this.fetch(url, {
      credentials: 'same-origin',
      integrity: importMap.integrity[url]
    })
    .then(function (res) {
      if (!res.ok)
        throw Error(errMsg(7,  [res.status, res.statusText, url, parent].join(', ') ));
      var contentType = res.headers.get('content-type');
      if (!contentType || !jsContentTypeRegEx.test(contentType))
        throw Error(errMsg(4,  contentType ));
      return res.text().then(function (source) {
        if (source.indexOf('//# sourceURL=') < 0)
          source += '\n//# sourceURL=' + url;
        (0, eval)(source);
        return loader.getRegister();
      });
    });
  };

  systemJSPrototype.resolve = function (id, parentUrl) {
    parentUrl = parentUrl || !true  || baseUrl;
    return resolveImportMap(( importMap), resolveIfNotPlainOrUrl(id, parentUrl) || id, parentUrl) || throwUnresolved(id, parentUrl);
  };

  function throwUnresolved (id, parentUrl) {
    throw Error(errMsg(8,  [id, parentUrl].join(', ') ));
  }

  var systemInstantiate = systemJSPrototype.instantiate;
  systemJSPrototype.instantiate = function (url, firstParentUrl) {
    var preloads = ( importMap).depcache[url];
    if (preloads) {
      for (var i = 0; i < preloads.length; i++)
        getOrCreateLoad(this, this.resolve(preloads[i], url), url);
    }
    return systemInstantiate.call(this, url, firstParentUrl);
  };

  /*
   * Supports loading System.register in workers
   */

  if (hasSelf && typeof importScripts === 'function')
    systemJSPrototype.instantiate = function (url) {
      var loader = this;
      return Promise.resolve().then(function () {
        importScripts(url);
        return loader.getRegister();
      });
    };

}());
 }System.register(["./preact-vendor-chunk-nomodule-c17702ec.js","./corejs-chunk-nomodule-cd0c4c85.js","./sentry-chunk-nomodule-9f2505bc.js","./lingui-chunk-nomodule-44c90d6b.js"],(function(e,t){"use strict";var n,r,a,o,i,s,c,u,l,A,d,f,p,m,h,v,g,y,w,_,E,b,k,x,T,I,C,S,M;return{setters:[function(e){n=e.a,r=e.l,a=e.A,o=e.y,i=e.s,s=e.e,c=e.d,u=e.O,l=e.j,A=e.p,d=e.q,f=e.F,p=e.h},function(e){m=e.p,h=e.w,v=e.c,g=e.a,y=e.i,w=e.g,_=e.b},function(e){E=e.s,b=e.c,k=e.a,x=e.S,T=e.b,I=e.i,C=e.E},function(e){S=e.i,M=e.r}],execute:function(){var B=n((function(e){var t=m.Object,n=e.exports=function(e,n,r){return t.defineProperty(e,n,r)};t.defineProperty.sham&&(n.sham=!0)})),O=e("Y",B),L=n((function(e){var t=m.Object,n=e.exports=function(e,n){return t.defineProperties(e,n)};t.defineProperties.sham&&(n.sham=!0)})),R=e("X",L),D=m.Object.getOwnPropertyDescriptors,F=e("V",D),U=n((function(e){var t=m.Object,n=e.exports=function(e,n){return t.getOwnPropertyDescriptor(e,n)};t.getOwnPropertyDescriptor.sham&&(n.sham=!0)})),N=e("Z",U),P=m.Object.getOwnPropertySymbols,Q=e("$",P),V=h.f("iterator"),j=m.Symbol,H=j,W=n((function(e){function t(n){return e.exports=t="function"==typeof H&&"symbol"==typeof V?function(e){return typeof e}:function(e){return e&&"function"==typeof H&&e.constructor===H&&e!==H.prototype?"symbol":typeof e},t(n)}e.exports=t})),z=e("e",(function(e){return m[e+"Prototype"]})),G=z("Array").includes,q=z("String").includes,Y=Array.prototype,K=String.prototype,Z=e("i",(function(e){var t=e.includes;return e===Y||e instanceof Array&&t===Y.includes?G:"string"==typeof e||e===K||e instanceof String&&t===K.includes?q:t})),J=z("Array").map,X=Array.prototype,$=e("f",(function(e){var t=e.map;return e===X||e instanceof Array&&t===X.map?J:t})),ee=m.Object.keys,te=e("l",ee),ne=z("Array").forEach,re=Array.prototype,ae={DOMTokenList:!0,NodeList:!0},oe=e("S",(function(e){var t=e.forEach;return e===re||e instanceof Array&&t===re.forEach||ae.hasOwnProperty(v(e))?ne:t})),ie=m.setTimeout,se=e("E",ie),ce=z("Array").find,ue=Array.prototype,le=e("a6",(function(e){var t=e.find;return e===ue||e instanceof Array&&t===ue.find?ce:t})),Ae=z("Array").filter,de=Array.prototype,fe=e("w",(function(e){var t=e.filter;return e===de||e instanceof Array&&t===de.filter?Ae:t})),pe=m.Array.isArray,me=pe;var he=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r};var ve=function(e){if(me(e))return he(e)},ge=m.Array.from,ye=ge,we=g("iterator"),_e=function(e){var t=Object(e);return void 0!==t[we]||"@@iterator"in t||y.hasOwnProperty(v(t))};var Ee=function(e){if(void 0!==H&&_e(Object(e)))return ye(e)},be=z("Array").slice,ke=Array.prototype,xe=function(e){var t=e.slice;return e===ke||e instanceof Array&&t===ke.slice?be:t},Te=xe;var Ie=function(e,t){var n;if(e){if("string"==typeof e)return he(e,t);var r=Te(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?ye(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}};var Ce=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Se=e("P",(function(e){return ve(e)||Ee(e)||Ie(e)||Ce()})),Me=z("Array").concat,Be=Array.prototype,Oe=e("c",(function(e){var t=e.concat;return e===Be||e instanceof Array&&t===Be.concat?Me:t}));var Le=function(e){if(me(e))return e},Re=w;var De=function(e,t){if(void 0!==H&&_e(Object(e))){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=Re(e);!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}};var Fe=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Ue=e("s",(function(e,t){return Le(e)||De(e,t)||Ie(e,t)||Fe()})),Ne=n((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new I(r||[]);return o._invoke=function(e,t,n){var r=l;return function(a,o){if(r===d)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?f:A,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",A="suspendedYield",d="executing",f="completed",p={};function m(){}function h(){}function v(){}var g={};g[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(C([])));w&&w!==n&&r.call(w,o)&&(g=w);var _=v.prototype=m.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function b(e,t){function n(a,o,i,s){var c=u(e[a],e,o);if("throw"!==c.type){var l=c.arg,A=l.value;return A&&"object"==typeof A&&r.call(A,"__await")?t.resolve(A.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(A).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:t,done:!0}}return h.prototype=_.constructor=v,v.constructor=h,v[s]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(b.prototype),b.prototype[i]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(_),_[s]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})),Pe=e("r",Ne),Qe=m.Promise,Ve=Qe;function je(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Ve.resolve(c).then(r,a)}var He=e("j",(function(e){return function(){var t=this,n=arguments;return new Ve((function(r,a){var o=e.apply(t,n);function i(e){je(o,r,a,i,s,"next",e)}function s(e){je(o,r,a,i,s,"throw",e)}i(void 0)}))}})),We=B;var ze=e("T",(function(e,t,n){return t in e?We(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e})),Ge=e("a4",(function(e){return e&&"incoming"!==e.direction&&!Boolean("event"in e)})),qe=e("a3",(function(e){var t=fe(e).call(e,(function(e){return Ge(e)}));return t[t.length-1]})),Ye=function(e){try{window.parent.postMessage(e,"*")}catch(e){console.error("Failed to Send PostMessage to Parent: ".concat(e))}},Ke=m.parseInt,Ze=z("Array").some,Je=Array.prototype,Xe=e("z",(function(e){var t=e.some;return e===Je||e instanceof Array&&t===Je.some?Ze:t}));m.JSON||(m.JSON={stringify:JSON.stringify});var $e,et=function(e,t,n){return m.JSON.stringify.apply(null,arguments)},tt=function(e){var t=e.uid,n=e.widgetId;T({uid:t,widgetId:n})},nt=function(e,t,n){try{0,console.error("MessageBird Livechat: ".concat(t),e),t&&E("info",t),n&&E("extra",n),b(e)}catch(e){console.error("Error while capturing error in livechat widget: ",e)}},rt=function(e,t,n,r){try{0,console.error("MessageBird Livechat: ".concat(t),e),t&&E("info",t),n&&E("widgetId",n),r&&E("userId",r);var a=st("userId");a&&E("stored_userId",a),b(e,{tags:{type:t,userId:r,widgetId:n}})}catch(e){console.error("Error while capturing error in livechat widget: ",e)}},at={};try{if(null===window.localStorage)throw Error("Local storage is not available");$e=window.localStorage}catch(e){$e={getItem:function(e){return at&&e in at?"".concat(at[e]):null},setItem:function(e,t){at[e]="".concat(t)},removeItem:function(e){at[e]=void 0}}}var ot=function(e,t){try{var n="object"===W(t)?et(t):t;null==$e||$e.setItem(e,n)}catch(e){nt(e,"saveToLocalStorage failed")}},it=function(e){try{null==$e||$e.removeItem(e)}catch(e){nt(e,"removeFromLocalStorage failed")}};function st(e){try{var t=null==$e?void 0:$e.getItem(e);return ct(e,t)}catch(e){return void nt(e,"getFromLocalStorage failed")}}var ct=function(e,t){var n,r;return null==t?t:Xe(n=["messages","thread","failedMessagesQueue"]).call(n,(function(t){return Z(e).call(e,t)}))?JSON.parse(t):Xe(r=["widgetLoadCount"]).call(r,(function(t){return Z(e).call(e,t)}))?Ke(t):"true"===t||"false"===t?JSON.parse(t):t},ut=function(e){var t=[e,"hasSeenMessagePopup"],n=function(e){Xe(t).call(t,(function(t){return Z(e).call(e,t)}))&&(null==$e||$e.removeItem(e))};for(var r in $e)n(r)},lt=e("F",(function(){var e="checking-storage...";try{return localStorage.setItem(e,"true"),localStorage.removeItem(e),!0}catch(e){return!1}})),At="mb",dt=function(e,t,n){var i,s,c=Oe(i="".concat(e,":")).call(i,n),u=null!==(s=st(c))&&void 0!==s?s:t,l=r(u),A=Ue(l,2),d=A[0],f=A[1],p=r(!1),m=Ue(p,2),h=m[0],v=m[1],g=a((function(e){if(n){if("function"==typeof e){var t=e(u);return ot(c,t),f(t),t}return ot(c,e),f(e),u}}),[c,n,u]);return o((function(){if(n){var e=st(c);e&&f(e),v(!0)}}),[n,c]),o((function(){if(n){var t,r,a,o;n===At&&(t=e,(o=st(le(r=te($e)).call(r,(function(e){return Z(e).call(e,t)&&/:.{36}$/.test(e)}))))&&(ot(Oe(a="".concat(e,":")).call(a,At),o),f(o),it(c))),function(){var t=st(e);t&&(ot(c,t),f(t),it(e))}()}}),[n,e,c]),{storageState:d,setStorageState:g,removeStorageState:a((function(){n&&(it(c),f(void 0))}),[c,n]),isStorageStateReady:h}},ft={"--color-main":"mainColor","--color-secondary":"secondaryColor","--color-avatar-background":"avatarColor","--bubble-color":"bubblesColor"};function pt(e,t){return t?"other":1==e?"one":"other"}function mt(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"}function ht(e,t){return"other"}function vt(e,t){var n=String(e).split(".")[0];return t?"other":0==n||1==n?"one":"other"}var gt=["en","nl","de","es","fr","id","pt","ru","it","tr","el","pt_BR","ar","zh","zh_HK","he","th"],yt={en:function(e,t){var n=String(e).split("."),r=!n[1],a=Number(n[0])==e,o=a&&n[0].slice(-1),i=a&&n[0].slice(-2);return t?1==o&&11!=i?"one":2==o&&12!=i?"two":3==o&&13!=i?"few":"other":1==e&&r?"one":"other"},es:pt,nl:mt,de:mt,fr:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},pt:vt,pt_BR:vt,id:ht,ru:function(e,t){var n=String(e).split("."),r=n[0],a=!n[1],o=r.slice(-1),i=r.slice(-2);return t?"other":a&&1==o&&11!=i?"one":a&&o>=2&&o<=4&&(i<12||i>14)?"few":a&&0==o||a&&o>=5&&o<=9||a&&i>=11&&i<=14?"many":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},tr:pt,el:pt,zh:ht,zh_HK:ht,he:function(e,t){var n=String(e).split("."),r=n[0],a=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-1);return t?"other":1==e&&a?"one":2==r&&a?"two":a&&(e<0||e>10)&&o&&0==i?"many":"other"},th:ht,ar:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":r>=3&&r<=10?"few":r>=11&&r<=99?"many":"other"}};function wt(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=wt(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=wt(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var Et=function(){var e=He(Pe.mark((function e(t){var n,r,a,o,i,s,c,u,l,A,d,f;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,a=t.token,o=t.method,i=t.contentType,s=void 0===i?"application/json":i,c=t.isJSON,u=void 0===c||c,l=t.extraHeaders,e.prev=1,d=new Headers(_t({Authorization:"Bearer ".concat(a),"Content-Type":s},l)),e.next=5,fetch(Oe(A="".concat("https://messaging.messagebird.com","/")).call(A,n),{method:o||"GET",mode:"cors",headers:d,body:u?et(r):r});case 5:return f=e.sent,e.abrupt("return",f);case 9:return e.prev=9,e.t0=e.catch(1),nt(e.t0,n),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),bt=function(e,t,n,r,a,o){return Et({url:e,body:t,method:"POST",token:n,contentType:r,isJSON:a,extraHeaders:o})},kt=function(e,t,n){return Et({url:e,token:t,method:"GET",contentType:n})},xt=function(){var e=He(Pe.mark((function e(t,n,r,a){var o,i,s;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.btoa(r),e.next=3,bt(Oe(o="livechat/v2/channels/".concat(n,"/users/")).call(o,i,"/login"),{identifier:t},a);case 3:return s=e.sent,e.next=6,s.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Tt=(e("k",function(){var e=He(Pe.mark((function e(t,n,r,a,o){var i,s,c,u,l,A,d,f,p,m,h;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=window.btoa(n),e.next=3,kt(Oe(i=Oe(s="livechat/v2/channels/".concat(t,"/users/")).call(s,p,"/attachments/")).call(i,a),r,o);case 3:if(m=e.sent,!(Z(c=m.headers.get("Content-Type")).call(c,"image")||Z(u=m.headers.get("Content-Type")).call(u,"pdf")||Z(l=m.headers.get("Content-Type")).call(l,"officedocument.wordprocessingml")||Z(A=m.headers.get("Content-Type")).call(A,"audio")||Z(d=m.headers.get("Content-Type")).call(d,"video")||Z(f=m.headers.get("Content-Type")).call(f,"stream"))){e.next=9;break}return e.next=7,m.blob();case 7:return h=e.sent,e.abrupt("return",{blob:h,fileName:m.headers.get("Content-Disposition")});case 9:return e.next=11,m.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),e("a9",function(){var e=He(Pe.mark((function e(t,n,r,a,o){var i,s,c,u;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={"Content-Type":o,"Content-Disposition":'attachment; filename="'.concat(a.name,'"')},c=window.btoa(n),e.next=4,bt(Oe(i="livechat/v2/channels/".concat(t,"/users/")).call(i,c,"/attachments"),a,r,o,!1,s);case 4:return u=e.sent,e.next=7,u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),function(){var e=He(Pe.mark((function e(t,n){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt("livechat/v3/channels/".concat(t,"/threads"),{},n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),It=z("Array").reduce,Ct=Array.prototype,St=e("G",(function(e){var t=e.reduce;return e===Ct||e instanceof Array&&t===Ct.reduce?It:t})),Mt=function(e){var t={};for(var n in e)t[n]=Bt(n,e[n]);return t},Bt=function(e,t){if(Z(e).call(e,"{")&&Z(e).call(e,"}")&&"string"==typeof t){var n,r=t.split(/{/),a=Ue(r,2),o=a[0],i=a[1].split(/}/),s=Ue(i,2),c=s[0],u=s[1];return fe(n=[o,[c],u]).call(n,(function(e){return Boolean(e)}))}return t};function Ot(e){switch(e){case"./locales/ar/messages.js":return t.import("./messages-chunk-nomodule-adeef778.js").then((function(e){return e.m}));case"./locales/de/messages.js":return t.import("./messages-chunk-nomodule-360fbc00.js").then((function(e){return e.m}));case"./locales/el/messages.js":return t.import("./messages-chunk-nomodule-a3c5d7e6.js").then((function(e){return e.m}));case"./locales/en/messages.js":return t.import("./messages-chunk-nomodule-9ff2a8a9.js").then((function(e){return e.m}));case"./locales/es/messages.js":return t.import("./messages-chunk-nomodule-6984e853.js").then((function(e){return e.m}));case"./locales/fr/messages.js":return t.import("./messages-chunk-nomodule-c455776d.js").then((function(e){return e.m}));case"./locales/he/messages.js":return t.import("./messages-chunk-nomodule-2491e9f6.js").then((function(e){return e.m}));case"./locales/id/messages.js":return t.import("./messages-chunk-nomodule-038c3155.js").then((function(e){return e.m}));case"./locales/it/messages.js":return t.import("./messages-chunk-nomodule-bfb64dbb.js").then((function(e){return e.m}));case"./locales/nl/messages.js":return t.import("./messages-chunk-nomodule-e5aafd0d.js").then((function(e){return e.m}));case"./locales/pt/messages.js":return t.import("./messages-chunk-nomodule-25a6ac5b.js").then((function(e){return e.m}));case"./locales/pt_BR/messages.js":return t.import("./messages-chunk-nomodule-16c5f21c.js").then((function(e){return e.m}));case"./locales/pt_PT/messages.js":return t.import("./messages-chunk-nomodule-93ecad8c.js").then((function(e){return e.m}));case"./locales/ru/messages.js":return t.import("./messages-chunk-nomodule-52dd7c9e.js").then((function(e){return e.m}));case"./locales/th/messages.js":return t.import("./messages-chunk-nomodule-6e63a51d.js").then((function(e){return e.m}));case"./locales/tr/messages.js":return t.import("./messages-chunk-nomodule-cbd29bc6.js").then((function(e){return e.m}));case"./locales/zh/messages.js":return t.import("./messages-chunk-nomodule-23b39fea.js").then((function(e){return e.m}));case"./locales/zh_HK/messages.js":return t.import("./messages-chunk-nomodule-5fa1e0cb.js").then((function(e){return e.m}));default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}function Lt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=He(Pe.mark((function e(t){var n,r;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot("./locales/".concat(t,"/messages.js"));case 2:return n=e.sent,r=n.messages,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=He(Pe.mark((function e(t,n){var r,a,o;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Oe(r="https://messaging.messagebird.com/livechat/widget/".concat(n,"/translations/")).call(r,t));case 2:return a=e.sent,o=a.json(),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=He(Pe.mark((function e(t,n){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.loadLocaleData(t,{plurals:yt[t]}),S.load(t,n),S.activate(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt=navigator.language.split("-"),Qt=Ue(Pt,1)[0];function Vt(e){return jt.apply(this,arguments)}function jt(){return(jt=He(Pe.mark((function e(t){var n;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t);case 2:n=e.sent,Ut(t,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=He(Pe.mark((function e(t,n){var r;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(t,n);case 2:r=e.sent,Ut(t,Mt(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=zt(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=zt(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}Z(gt).call(gt,Qt);var qt=function(e,t,n,r,a){var s=i(!1),c=function(){var e=navigator.language;if(Z(e).call(e,"zh"))return"zh"===e||"zh-cn"===e||"zh-CN"===e?e:"zh_HK";var t=navigator.language.split("-");return Ue(t,1)[0]}();t&&!1===s.current&&(Kt(t,e||"en",n,a),s.current=!0),!1===s.current&&(Kt(c,e||"en",n,a),s.current=!0),o((function(){e&&r?Kt(e,e,n,a):e&&Kt(c,e,n,a)}),[e,r,n,c,a])},Yt=function(e){var t=St(gt).call(gt,(function(e,t){return Gt(Gt({},e),{},ze({},t,"default"))}),{});return Gt(Gt({},t),e)},Kt=function(){var e=He(Pe.mark((function e(t,n,r,a){var o,i,s;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Yt(r),i=o[n],!(t in o)){e.next=8;break}if("default"!==(s=o[t])){e.next=6;break}return e.abrupt("return",Vt(t));case 6:if("custom"!==s){e.next=8;break}return e.abrupt("return",Ht(t,a));case 8:return e.abrupt("return","custom"===i?Ht(n,a):Vt(n));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Zt=function(e,t,n){for(var r=[],a=e.length-1;a>=0;a--)if(t(e[a])&&r.push(e[a]),r.length===n)return r;return r},Jt=e("a5",(function(e,t){var n;return null===(n=Zt(e,t,1))||void 0===n?void 0:n[0]})),Xt=function(e,t){var n=Jt(e||[],(function(e){return"incoming"===e.direction&&!e.event})),r=null!=e&&e.length?e[(null==e?void 0:e.length)-1]:null;if(!n||"outgoing"===(null==r?void 0:r.direction))return!1;var a=new Date(n.createdAt).getTime()+1e4,o=(new Date).getTime();return n.payload.text===t&&o<=a},$t=function(){try{var e;(e=console).log.apply(e,arguments)}catch(e){}},en=Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:2}),tn=function(){return en.format(new Date)},nn=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return Oe(t=[tn()+" %c "+e+" ","color:"+n+";font-weight: 700"]).call(t,a)},rn=function(e,t){var n=t||!0;return{warn:function(t){var r,a;if(!n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];$t.apply(void 0,Se(nn.apply(void 0,Oe(r=[Oe(a="".concat(e,":")).call(a,t),"#ecda00"]).call(r,i))))}},error:function(t){var r,a;if(!n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];$t.apply(void 0,Se(nn.apply(void 0,Oe(r=[Oe(a="".concat(e,":")).call(a,t),"#b30505"]).call(r,i))))}},info:function(t){var r,a;if(!n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];$t.apply(void 0,Se(nn.apply(void 0,Oe(r=[Oe(a="".concat(e,":")).call(a,t),"#2eb8f8"]).call(r,i))))}},success:function(t){var r,a;if(!n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];$t.apply(void 0,Se(nn.apply(void 0,Oe(r=[Oe(a="".concat(e,":")).call(a,t),"#73c276"]).call(r,i))))}}}},an=e("m",{messageWrapper:"styles_messageWrapper__1HouA",message:"styles_message__AyABk",sameUser:"styles_sameUser__1awmJ",outgoing:"styles_outgoing__1VYKo",incoming:"styles_incoming__3aosf",date:"styles_date__2USDo",avatar:"styles_avatar__id67q",footer:"styles_footer__PCkie",failed:"styles_failed__3cheF",downloadStatusWrapper:"styles_downloadStatusWrapper__2mHMQ",messageButtons:"styles_messageButtons__3UxXI",link:"styles_link__15QvB",qrCode:"styles_qrCode__1ZgnK",attachment_image:"styles_attachment_image__1AbBS",attachment_download:"styles_attachment_download__3Q4qG",documentPreview:"styles_documentPreview__1IhXz",documentIcon:"styles_documentIcon__3o-WQ",fileName:"styles_fileName__3Jijg",fileSize:"styles_fileSize__DblgM",loadingBlock:"styles_loadingBlock__3d0YD",loadingBlock_bar:"styles_loadingBlock_bar__1oUrv",progressAnimation:"styles_progressAnimation__2RSLU",errorFile:"styles_errorFile__3Fugk",retryButton:"styles_retryButton__2Dofz",errorMessage:"styles_errorMessage__QWy3V",platformName:"styles_platformName__1GuFx",channelIcon:"styles_channelIcon__35QDq",messageTextStatusWrapper:"styles_messageTextStatusWrapper__38o68",status:"styles_status__2TCqQ",timestamp:"styles_timestamp__2c19-",timestampOutgoing:"styles_timestampOutgoing__3BHnR","slide-up":"styles_slide-up__2qRft"}),on="styles_buttonsWrapper__W-Vjy",sn="styles_textButton__3xnEd",cn="styles_avatar__7KkCa",un=e("a",m.Object.assign);m.setInterval;var ln=xe,An=[S._("Jan"),S._("Feb"),S._("Mar"),S._("Apr"),S._("May"),S._("Jun"),S._("Jul"),S._("Aug"),S._("Sep"),S._("Oct"),S._("Nov"),S._("Dec")],dn=(e("a7",(function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})),e("n",(function(e){var t,n,r,a=e.getHours(),o=e.getMinutes();return Oe(t="".concat(ln(n="0"+a).call(n,-2),":")).call(t,ln(r="0"+o).call(r,-2))})),e("x",(function(e){return An[e.getMonth()]})),e("h",(function(e){return Math.floor((+new Date-+e)/1e3)}))),fn=function(){var e=Xi().config,t=s((function(){if(null!=e&&e.availableChannels)return t=e.availableChannels,St(t).call(t,(function(e,t){var n;return e[Oe(n="".concat(t.platform,":")).call(n,t.platformIdentifier)]=t,e}),{});var t}),[e]);return[t,function(e){var n,r=Oe(n="".concat(e.text,":")).call(n,e.value);return t[r]}]},pn=e("q",{button:"styles_button__2w2YL",fullWidth:"styles_fullWidth__1ryNs",icon:"styles_icon__2MV2i",upperCasedButton:"styles_upperCasedButton__1LdQP"}),mn=e("M",(function(e){var t,n,r=e.id,a=e.text,o=e.value,i=e.onClick,s=e.fullWidth,u=e.icon,l=function(){null==i||i({id:r,value:o,text:a})},A=Oe(t=Oe(n="".concat(pn.button," ")).call(n,s?pn.fullWidth:""," ")).call(t,"sms"===a?pn.upperCasedButton:""),d="email_freemium"===a?"Email":a;return c.createElement("div",{className:A,onClick:l,onKeyPress:l,role:"button",tabIndex:0},u&&c.createElement("div",{className:pn.icon},u),c.createElement("span",null,d))})),hn="styles_wrapper__Dv-rg",vn="styles_list__1ta1q",gn="styles_footerLinks__2MTgD",yn="styles_numberedItem__32QUU",wn="styles_listItem__1Myk5",_n="styles_link__2jGwV",En="styles_iconHeader__1I03F",bn="styles_authorizeFacebookButton__1e0Wn",kn="styles_authorizeFacebookButtonText__2rDaK",xn="styles_authorizeTwitterButton__2WlDh",Tn="styles_authorizeTwitterButtonText__3vqHz",In="styles_buttonsWrapperMobile__1CDj0",Cn="styles_form__2Kek0",Sn="styles_formBody__1WGc6",Mn="styles_buttonWrapper__2FDJs",Bn="styles_textHelp__2EPQp",On="styles_textLink__2_C8a",Ln="styles_footerButton__1FVNV",Rn="styles_errorText__3Yl3w",Dn="styles_flagContiner__VbHtN",Fn={icon:"styles_icon__Ys9RK",email:"styles_email__b-vvp",email_freemium:"styles_email_freemium__3ahd9",voice:"styles_voice__1GeVM",whatsapp:"styles_whatsapp__3z0FK",facebook:"styles_facebook__3yQs7",sms:"styles_sms__1u9Gx",wechat:"styles_wechat__3qq4e",line:"styles_line__38Pg6",telegram:"styles_telegram__BSYs0",twitter:"styles_twitter__1xLY6"},Un=e("b",{channel:"styles_channel__396ZG",channelName:"styles_channelName__Q8vJ4",channelIcon:"styles_channelIcon__1i0qs",small:"styles_small__YfrFZ",email:"styles_email__2fX6Y",email_freemium:"styles_email_freemium__2syJP",voice:"styles_voice__3HPhx",whatsapp:"styles_whatsapp__80fGh",facebook:"styles_facebook__1JafZ",instagram:"styles_instagram__3MkEp",sms:"styles_sms__3o20s",wechat:"styles_wechat__3LUK4",line:"styles_line__2WArA",telegram:"styles_telegram__2yK9v",twitter:"styles_twitter__7AVNr",url:"styles_url__N7l9f",livechat:"styles_livechat__9cEy4"}),Nn=un,Pn=e("_",n((function(e){function t(){return e.exports=t=Nn||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t}))),Qn=z("Array").indexOf,Vn=Array.prototype,jn=function(e){var t=e.indexOf;return e===Vn||e instanceof Array&&t===Vn.indexOf?Qn:t},Hn=P,Wn=ee;var zn=function(e,t){if(null==e)return{};var n,r,a={},o=Wn(e);for(r=0;r<o.length;r++)n=o[r],jn(t).call(t,n)>=0||(a[n]=e[n]);return a};var Gn,qn=e("o",(function(e,t){if(null==e)return{};var n,r,a=zn(e,t);if(Hn){var o=Hn(e);for(r=0;r<o.length;r++)n=o[r],jn(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a})),Yn=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",id:"popup-close-icon",viewBox:"0 0 16 16"},r),c.createElement("path",{d:"M9.06006 8L12.1501 4.91C12.4401 4.62 12.4401 4.14 12.1501 3.85C11.8601 3.56 11.3801 3.56 11.0901 3.85L8.00006  6.94L4.90006 3.84C4.61006 3.55 4.13006 3.55 3.84006 3.84C3.55006 4.13 3.55006 4.61 3.84006 4.9L6.94006 8L3.85006  11.09C3.56006 11.38 3.56006 11.86 3.85006 12.15C4.00006 12.3 4.19006 12.37 4.38006 12.37C4.57006 12.37 4.76006  12.3 4.91006 12.15L8.00006 9.06L11.0901 12.15C11.2401 12.3 11.4301 12.37 11.6201 12.37C11.8101 12.37 12.0001 12.3  12.1501 12.15C12.4401 11.86 12.4401 11.38 12.1501 11.09L9.06006 8Z",fill:n}))},Kn=e("B",(function(e){var t=e.color,n=void 0===t?"currentColor":t,r=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",id:"close-icon",viewBox:"0 0 20 20"},r),c.createElement("path",{d:"M6.4 6.4l7.2 7.2m0-7.2l-7.2 7.2",fill:"none",stroke:n,strokeLinecap:"square",strokeWidth:2}))})),Zn=function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"14",viewBox:"0 0 16 14"},t),c.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},c.createElement("path",{d:"M.035 12L14 12 14 0 0 0 0 12M0 1.6L7 6.8M14 1.6L7 6.8M13.241 11.017L9.059 5.6M.813 10.952L4.967 5.599",transform:"translate(1 1)"})))},Jn=function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 33 33"},t),c.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M31 1v9h-9M2 32v-9h9M1 16C1.3 8.948 6.201 2.97 12.972 1.396 19.742-.178 26.713 3.04 30 9.259M32 17c-.363 7.093-5.286 13.07-12.041 14.618C13.204 33.167 6.27 29.908 3 23.648"}))},Xn=e("L",(function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},t),c.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M0 9h13.6c1.326 0 2.4-.895 2.4-2H0V4c0-2.21 1.79-4 4-4h24c2.21 0 4 1.79 4 4v17c0 2.21-1.79 4-4 4h-5v4.282c0 2.195-2.55 3.482-4.404 2.223L9 25H4c-2.21 0-4-1.79-4-4v-3h9.75c1.243 0 2.25-.895 2.25-2H0V9z"}))}));e("R",Gn),function(e){e.Home="Home",e.Chat="Chat",e.Send="Send",e.ConnectWhatsApp="ConnectWhatsApp",e.ConnectWeChat="ConnectWeChat",e.ConnectInstagram="ConnectInstagram"}(Gn||e("R",Gn={}));var $n=e("p",/Mobi/i.test(window.navigator.userAgent)),er=(e("O",/OS 15/i.test(window.navigator.userAgent)&&/Safari/i.test(window.navigator.userAgent)),pe),tr="google-analytics-script",nr="google-analytics-init",rr=e("v",(function(){var e=a((function(e,t){var n=er(e)?e:[e];oe(n).call(n,(function(e){!function(e,t){try{window.gtag("event",e,{event_category:"livechat",event_label:(null==t?void 0:t.label)||void 0,value:(null==t?void 0:t.value)||void 0})}catch(e){nt(e,"failed_to_send_tracking_event")}}(e,t)}))}),[]),t=a((function(){if(!document.getElementById(tr)){var e=document.createElement("script"),t=document.getElementsByTagName("head")[0];e.src="https://www.googletagmanager.com/gtag/js?id=G-7P5CKRSTC5",e.id=tr,null==t||t.appendChild(e)}}),[]);return o((function(){if(!document.getElementById(nr)){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.id=nr,t.innerHTML="\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){window.dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'G-7P5CKRSTC5', {\n    anonymize_ip: true,\n    allow_google_signals: false,\n    allow_ad_personalization_signals: false\n  });\n\n  gtag('consent', 'default', {\n    analytics_storage: 'denied',\n    ad_storage: 'denied'\n  });\n",null==e||e.appendChild(t)}}),[]),{track:e,initialize:t}})),ar=function(e){return"882796aa-30ec-4ac0-9d07-73615b7eb106"===e?{hideDefaultBranding:!0,hideDataConsent:!0,iconLogo:"c25fd2f612a03c63.png"}:"6ab6f641-d499-4fe2-aecd-f43d6141525a"===e?{hideDefaultBranding:!0}:void 0},or=e("C",{line:"Line",facebook:"Facebook Messenger",instagram:"Instagram",telegram:"Telegram",email:"Email",email_freemium:"Email",wechat:"WeChat",whatsapp:"WhatsApp",twitter:"Twitter",sms:"SMS",voice:"Voice",livechat:"Live Chat",url:"Support Url"}),ir=(e("y",{email:"#8f8fff",email_freemium:"#8f8fff",voice:"#2a2ae6",whatsapp:"#24d366",facebook:"#0084ff",instagram:"#dc3175",sms:"#0c2868",wechat:"#2dc100",line:"#00b900",telegram:"#53abda",twitter:"#32ccfe",livechat:"#0089ff",url:"#8f8fff"}),{whatsapp:Gn.ConnectWhatsApp,wechat:Gn.ConnectWeChat,instagram:Gn.ConnectInstagram}),sr=e("d",{line:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"18",viewBox:"0 0 20 18"},t),c.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M.862 7.703c0-4.064 4.092-7.37 9.121-7.37 5.03 0 9.12 3.306 9.12 7.37 0 1.627-.632 3.091-1.954 4.534-1.914 2.194-6.192 4.865-7.166 5.273-.973.409-.83-.26-.79-.49l.13-.777c.031-.232.063-.59-.03-.82-.102-.254-.505-.385-.803-.448C4.107 14.397.862 11.346.862 7.703zM7.448 5.88a.174.174 0 0 0-.173.173v3.875c0 .096.077.174.173.174h.622a.173.173 0 0 0 .173-.174V6.053a.173.173 0 0 0-.173-.173h-.622zm4.542 0a.174.174 0 0 0-.173.173v2.303l-1.77-2.399-.014-.017h-.002c-.002-.006-.007-.008-.01-.013 0 0-.002 0-.003-.002l-.01-.008-.004-.003a.062.062 0 0 0-.01-.006.02.02 0 0 0-.004-.003l-.01-.006-.005-.002-.01-.005a.021.021 0 0 0-.005-.001.051.051 0 0 0-.011-.004c-.002 0-.004 0-.006-.002a.053.053 0 0 0-.01-.001h-.007l-.009-.003H9.28a.174.174 0 0 0-.173.172v3.875c0 .096.078.174.173.174h.622a.173.173 0 0 0 .173-.174V7.627l1.773 2.401a.173.173 0 0 0 .044.043h.002a.09.09 0 0 0 .01.008c.003 0 .004.001.006.003l.008.004.009.003c.001.002.003.002.005.002a.083.083 0 0 0 .011.004h.002c.015.004.03.007.045.007h.622a.173.173 0 0 0 .173-.174V6.053a.173.173 0 0 0-.173-.173h-.622zm-7.977 0a.173.173 0 0 0-.174.174v3.874c0 .047.019.089.049.12l.002.003.002.002c.031.03.073.049.12.049h2.486a.174.174 0 0 0 .173-.174v-.624a.173.173 0 0 0-.173-.173H4.807V6.054a.173.173 0 0 0-.173-.174h-.621zm9.389 0a.174.174 0 0 0-.121.049l-.001.002-.003.003a.173.173 0 0 0-.048.12v3.874a.171.171 0 0 0 .05.123l.003.002c.03.03.072.049.12.049h2.485a.173.173 0 0 0 .172-.174v-.624a.172.172 0 0 0-.172-.173h-1.691v-.655h1.691a.172.172 0 0 0 .172-.173v-.624a.173.173 0 0 0-.172-.173h-1.691V6.85h1.691a.173.173 0 0 0 .172-.174v-.623a.173.173 0 0 0-.172-.174h-2.485z"}))},facebook:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},t),c.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M8 0C3.493 0 0 3.301 0 7.76c0 2.333.956 4.348 2.513 5.74.13.118.209.28.215.456l.044 1.423c.014.454.483.748.898.566l1.587-.7c.135-.06.285-.07.427-.032.729.201 1.506.308 2.316.308 4.507 0 8-3.302 8-7.76C16 3.3 12.507 0 8 0zm4.803 5.97l-2.35 3.728c-.373.593-1.175.74-1.735.32L6.849 8.618c-.172-.13-.407-.128-.578.001l-2.524 1.916c-.336.256-.777-.148-.55-.506L5.547 6.3c.373-.592 1.175-.74 1.735-.32l1.869 1.402c.172.129.407.127.578-.002l2.524-1.915c.336-.256.777.148.55.505z"}))},instagram:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 183 183"},t),c.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M91.594 0C66.72 0 63.599.11 53.83.556c-9.75.45-16.406 2.002-22.229 4.28-6.024 2.352-11.133 5.498-16.224 10.62-5.095 5.119-8.224 10.257-10.57 16.313C2.535 37.627.99 44.32.55 54.122.114 63.946 0 67.087 0 92.1c0 25.012.11 28.142.553 37.966.449 9.804 1.992 16.497 4.255 22.353 2.341 6.058 5.47 11.196 10.563 16.315 5.089 5.123 10.199 8.278 16.219 10.63 5.827 2.277 12.484 3.83 22.232 4.279 9.77.447 12.889.556 37.76.556 24.875 0 27.987-.11 37.757-.556 9.75-.45 16.413-2.002 22.24-4.28 6.021-2.351 11.124-5.506 16.212-10.629 5.095-5.12 8.224-10.257 10.57-16.313 2.252-5.858 3.798-12.552 4.256-22.353.439-9.824.553-12.956.553-37.968 0-25.013-.114-28.152-.553-37.976-.458-9.805-2.004-16.497-4.255-22.353-2.347-6.058-5.476-11.196-10.57-16.316-5.095-5.123-10.19-8.27-16.22-10.62-5.838-2.277-12.497-3.83-22.247-4.279C119.556.11 116.445 0 91.565 0zm-8.216 16.597c2.438-.004 5.159 0 8.216 0 24.453 0 27.351.088 37.008.53 8.93.41 13.776 1.91 17.005 3.171 4.274 1.67 7.32 3.665 10.524 6.889 3.206 3.223 5.19 6.293 6.854 10.591 1.254 3.243 2.748 8.116 3.154 17.096.439 9.709.534 12.625.534 37.204 0 24.58-.095 27.496-.534 37.205-.408 8.98-1.9 13.853-3.154 17.096-1.66 4.298-3.648 7.358-6.854 10.58-3.205 3.223-6.249 5.219-10.524 6.888-3.225 1.266-8.075 2.763-17.005 3.174-9.655.441-12.555.537-37.008.537-24.456 0-27.354-.096-37.009-.537-8.93-.415-13.776-1.915-17.006-3.176-4.274-1.67-7.327-3.665-10.533-6.888-3.205-3.224-5.19-6.286-6.853-10.586-1.254-3.242-2.748-8.116-3.154-17.096-.439-9.709-.527-12.625-.527-37.22 0-24.594.088-27.495.527-37.204.408-8.98 1.9-13.853 3.154-17.1 1.66-4.298 3.648-7.368 6.853-10.591 3.206-3.224 6.259-5.22 10.533-6.892 3.228-1.267 8.077-2.763 17.006-3.176 8.45-.384 11.723-.499 28.793-.518zm57.104 15.292c-6.068 0-10.99 4.945-10.99 11.049 0 6.101 4.922 11.052 10.99 11.052 6.067 0 10.99-4.95 10.99-11.052 0-6.102-4.923-11.052-10.99-11.052zM91.594 44.803C65.619 44.803 44.56 65.98 44.56 92.1c0 26.12 21.06 47.287 47.034 47.287s47.025-21.168 47.025-47.287c0-26.12-21.053-47.297-47.027-47.297zm0 16.597c16.86 0 30.528 13.744 30.528 30.7 0 16.954-13.669 30.7-30.528 30.7-16.862 0-30.529-13.746-30.529-30.7 0-16.956 13.667-30.7 30.529-30.7z"}))},telegram:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"19",height:"17",viewBox:"0 0 19 17"},t),c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("path",{fill:"#FFF",d:"M16.972.181L.712 6.75s-.77.27-.709.771c.061.5.69.73.69.73l4.089 1.417 2.43 1.21 6.682 5.275c1.113.5 1.519-.542 1.519-.542L18.308.577c0-.453-.274-.577-.574-.577-.362 0-.762.181-.762.181z",transform:"translate(.444 .222)"}),c.createElement("path",{fill:"#D2E5F1",d:"M14.604 3.269L4.667 9.694s1.25 4.172 1.496 4.965c.246.793.443.811.443.811l.54-4.691s7.499-6.864 7.806-7.156c.307-.292.205-.354.205-.354.007-.119-.052-.158-.134-.158-.164 0-.42.158-.42.158z",transform:"translate(.444 .222)"}),c.createElement("path",{fill:"#B5D0E4",d:"M6.667 15.557c.221.102.424-.061.424-.061l2.592-2.513-2.52-2.094-.496 4.668z",transform:"translate(.444 .222)"})))},email:Zn,email_freemium:Zn,wechat:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"16",viewBox:"0 0 20 16"},t),c.createElement("g",{fill:"#FFF",fillRule:"evenodd"},c.createElement("path",{d:"M5.176.342C3.173.998 1.7 2.259 1.1 4.336c-.648 2.246.219 4.427 2.274 5.886.32.227.369.421.264.77-.143.475-.223.969-.347 1.533.677-.425 1.247-.806 1.843-1.143.179-.102.43-.128.642-.11.613.053 1.223.145 1.893.228-.153-1.809.404-3.267 1.625-4.457 1.21-1.179 2.699-1.7 4.411-1.79-.097-1.044-.465-1.928-1.065-2.715C11.407.921 9.396 0 7.324 0 6.606 0 5.88.11 5.176.342zM9.11 4.56c-.007-.412.35-.774.772-.782.43-.007.779.33.782.76.005.436-.326.774-.761.779h-.011c-.43 0-.774-.333-.782-.757zm-4.138.753c-.435-.011-.763-.357-.75-.79.012-.426.367-.758.797-.745.42.013.775.383.76.793-.016.415-.365.743-.786.743l-.02-.001z"}),c.createElement("path",{d:"M10.493 6.913c-2.716 1.778-3.052 5.106-.704 7.275 1.234 1.141 2.73 1.606 4.402 1.436.548-.056 1.099-.36 1.624-.304.526.054 1.02.414 1.56.654-.037-.142-.044-.286-.107-.4-.336-.612-.147-.996.377-1.46 1.814-1.609 1.988-4.148.503-6.062C17.112 6.717 15.393 6 13.663 6c-1.11 0-2.226.295-3.17.913zm-.048 2.41c-.012-.353.285-.658.64-.656.36.002.648.302.635.66-.013.34-.296.608-.639.608-.34 0-.625-.274-.636-.611zm4-.05c.014-.336.296-.608.63-.606.354.003.633.3.62.66-.013.342-.284.602-.627.602h-.002c-.356-.002-.635-.296-.621-.656z"})))},whatsapp:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"18",height:"17",viewBox:"0 0 18 17"},t),c.createElement("path",{fill:"#FFF",d:"M12.976 10.092c-.208-.104-1.227-.603-1.417-.672-.19-.069-.329-.103-.467.103-.138.207-.535.672-.656.81-.121.137-.242.155-.45.051-.207-.103-.875-.32-1.667-1.024-.617-.547-1.033-1.223-1.154-1.43-.12-.206-.012-.318.091-.42.094-.093.208-.242.311-.362.104-.12.139-.207.208-.344.069-.138.034-.259-.018-.362-.051-.103-.466-1.119-.639-1.532-.168-.403-.34-.348-.466-.354-.121-.006-.26-.008-.398-.008s-.363.052-.553.258c-.19.207-.725.706-.725 1.722s.743 1.997.846 2.135c.104.137 1.462 2.222 3.542 3.116.495.212.881.34 1.182.434.497.157.95.135 1.306.082.399-.06 1.227-.499 1.4-.981.173-.482.173-.895.12-.981-.05-.086-.19-.138-.396-.241m-3.784 5.14H9.19c-1.237 0-2.451-.33-3.51-.956l-.252-.149-2.61.682.696-2.533-.164-.26c-.69-1.093-1.055-2.356-1.054-3.653.001-3.785 3.095-6.864 6.9-6.864 1.842 0 3.574.715 4.876 2.013 1.303 1.297 2.02 3.022 2.019 4.856-.002 3.785-3.096 6.865-6.898 6.865m5.87-12.707C13.496.965 11.412.105 9.192.104 4.618.104.895 3.809.894 8.362.893 9.818 1.275 11.24 2 12.492L.824 16.77l4.4-1.149c1.211.658 2.576 1.005 3.965 1.005h.003c4.574 0 8.297-3.705 8.299-8.258 0-2.207-.862-4.282-2.429-5.843"}))},sms:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},t),c.createElement("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M13 9H6c-.552 0-1-.448-1-1s.448-1 1-1h7c.552 0 1 .448 1 1s-.448 1-1 1m-7 4c-.552 0-1-.448-1-1s.448-1 1-1h4c.552 0 1 .448 1 1s-.448 1-1 1H6zM0 9c0 1.68.469 3.298 1.36 4.7v2.7c0 .296.131.577.358.767.226.189.526.27.817.217l2.422-.43.19.164c.087.075.187.134.294.175C6.678 17.769 7.842 18 9 18c4.962 0 9-4.038 9-9s-4.038-9-9-9-9 4.038-9 9z"}))},voice:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13"},t),c.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M4.252 4.644c1.409 1.58 2.974 3.16 4.54 4.58.157.159.392.159.548 0l.626-.63c.392-.396 1.018-.396 1.41 0l1.33 1.342c.392.395.392 1.026 0 1.421l-.626.632c-1.252 1.264-3.288 1.343-4.619.237-2.27-1.895-4.305-3.949-6.184-6.16C.103 4.723.259 2.67 1.512 1.406l.626-.632c.391-.394 1.018-.394 1.41 0l1.33 1.343c.391.395.391 1.027 0 1.422l-.548.552c-.157.158-.157.395-.078.553z"}))},twitter:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 48 39"},t),c.createElement("path",{fill:"#fff",d:"M33.24 0a9.841 9.841 0 00-9.6 12.09A27.96 27.96 0 013.33 1.8a9.78 9.78 0 003.06 13.14 9.824 9.824 0 01-4.47-1.2v.09a9.84 9.84 0 007.92 9.66 9.902 9.902 0 01-4.47.18 9.871 9.871 0 009.21 6.84A19.775 19.775 0 010 34.59 27.872 27.872 0 0015.09 39c18.12 0 28.02-15 28.02-28.02V9.72A19.963 19.963 0 0048 4.62c-1.77.78-3.66 1.32-5.67 1.56A9.974 9.974 0 0046.68.72a19.85 19.85 0 01-6.27 2.4A9.843 9.843 0 0033.21 0h.03z"}))},livechat:Xn,url:function(e){e.color;var t=qn(e,["color"]);return c.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},t),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3.75C0 1.67893 1.67893 0 3.75 0H12.25C14.3211 0 16 1.67893 16 3.75V12.25C16 14.3211 14.3211 16 12.25 16H3.75C1.67893 16 0 14.3211 0 12.25V3.75ZM3.75 1.5C2.50736 1.5 1.5 2.50736 1.5 3.75V12.25C1.5 13.4926 2.50736 14.5 3.75 14.5H12.25C13.4926 14.5 14.5 13.4926 14.5 12.25V3.75C14.5 2.50736 13.4926 1.5 12.25 1.5H3.75Z",fill:"white"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.75 5.5H3.25V4H12.75V5.5Z",fill:"white"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 8H3.25V6.5H10.5V8Z",fill:"white"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 10.5H3.25V9H5.5V10.5Z",fill:"white"}))}}),cr=function(e){var t,n,r,a,o,i,s,c=e.platform,u=e.platformIdentifier,l=e.conversationCode,A=e.urls;return{facebook:Oe(t="https://m.me/".concat(u)).call(t,l?"?ref=MB_CONVERSATION_BRIDGING_".concat(l):""),instagram:"https://instagram.com/".concat(u),whatsapp:Oe(n="https://wa.me/".concat(u)).call(n,l?"?text=".concat(encodeURI("My conversation code is ".concat(l))):""),telegram:Oe(r="https://t.me/".concat(u)).call(r,l?"?start=MB_CONVERSATIONS_BRIDGING_".concat(encodeURI("".concat(l))):""),line:Oe(a="https://line.me/R/oaMessage/".concat(u,"/")).call(a,l?"?".concat(encodeURI("My conversation code is ".concat(l))):""),voice:"tel:+".concat(u.replace(/\s+/g,"")),sms:"sms:".concat(u),email:"mailto:".concat(u),email_freemium:"mailto:".concat(u),wechat:null==A||null===(o=A.mobile)||void 0===o?void 0:o.url,twitter:Oe(i="https://twitter.com/messages/compose?recipient_id=".concat(u)).call(i,l?"&text=".concat(encodeURI("My conversation code is ".concat(l))):""),livechat:"",url:null==A||null===(s=A.all)||void 0===s?void 0:s.url}[c]||""},ur=(e("aa",(function(e){var t,n,r=e.platform,a=e.platformIdentifier,o=e.showQRCode,i=e.urls,s=e.customLabel,u=rr().track,l=Xi(),A=l.push,d=l.setConnectChannelLink,f=l.widgetId,p=sr[r]||null;if(null===p)return null;var m=Oe(t="".concat(Un.channel," ")).call(t,Un[r]);return c.createElement("a",{href:cr({platform:r,platformIdentifier:a,urls:i}),className:m,target:"_blank",rel:"noopener noreferrer",onClick:function(e){u("channel_click",{label:r}),(o&&!$n&&d||function(e){var t;return Z(t=["03534362-7d20-47b3-9084-2b37be2ca4c8"]).call(t,e)}(f))&&(e.preventDefault(),d(cr({platform:r,platformIdentifier:a,urls:i})),A(ir[r]))},"data-testid":"home-view-channel"},c.createElement("div",{className:Oe(n="".concat(Un.channelIcon," ")).call(n,Un[r])},c.createElement(p,{width:16})),c.createElement("p",{className:Un.channelName},s||function(e){var t,n=or[e]||e;return Z(t=["email","email_freemium"]).call(t,e)?c.createElement(M.Trans,{id:"Email us"}):"voice"===e?c.createElement(M.Trans,{id:"Call us"}):"sms"===e?c.createElement(M.Trans,{id:"Message us"}):"url"===e?c.createElement(M.Trans,{id:"Support Url"}):"".concat(n)}(r)))})),function(e){var t,n=e.channel,r=e.width,a=void 0===r?16:r;e.height;var o=sr[n]||null,i=Oe(t="".concat(Fn.icon," ")).call(t,Fn[n]);return c.createElement("div",{className:i},c.createElement(o,{width:a}))}),lr=m.Object.entries;function Ar(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=Ar(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=Ar(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var fr,pr=function(e){window.pushpromjs.sendMetric(function(e){var t,n,r;if("gauge"===e.type)return e;var a=dr(dr({},e.labels),{},{uid:null!=e&&null!==(t=e.labels)&&void 0!==t&&t.uid?hr(e.labels.uid):void 0,userId:null!=e&&null!==(n=e.labels)&&void 0!==n&&n.userId?hr(e.labels.userId):void 0}),o=St(r=lr(a)).call(r,(function(e,t){var n=Ue(t,2),r=n[0],a=n[1];return void 0===a?e:dr(dr({},e),{},ze({},r,a))}),{});return dr(dr({},e),{},{labels:o})}(e))},mr=function(e,t){try{pr({type:"counter",name:e,method:"inc",labels:t})}catch(e){}},hr=function(e){try{return window.btoa(e)}catch(e){mr("js_livechatwidget_errors",{error:"convertToBase64_error"})}},vr=function(e,t){return mr("livechatwidget_module_loaded_".concat(e),{path:t})},gr=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,yr=function(){var e=He(Pe.mark((function e(t){var n,r;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,r=function(){var e=He(Pe.mark((function e(){var a,o;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,vr("base"),e.next=4,t();case 4:return a=e.sent,vr("success"),e.abrupt("return",a);case 9:if(e.prev=9,e.t0=e.catch(0),i=e.t0.message,(o=i.match(gr))&&o.length&&vr("error",o[0].replace(window.location.origin,"")),!(n<3)){e.next=17;break}return n++,e.next=17,r();case 17:case"end":return e.stop()}var i}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",r());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wr=e("J",(function(e){return c.lazy((function(){return yr((function(){return e()}))}))})),_r="styles_loader__2ebYH",Er=wr((function(){return t.import("./LazyQRCode-chunk-nomodule-cba4ec90.js")})),br=e("Q",(function(e){var t=e.value,n=e.size;return c.createElement("div",{style:{position:"relative",height:"".concat(n,"px"),width:"".concat(n,"px")}},c.createElement(u,{fallback:c.createElement(kr,{size:n})},c.createElement(Er,{value:t,size:n})))})),kr=function(e){var t=e.size;return c.createElement("div",{className:_r,style:{width:"".concat(t,"px"),height:"".concat(t,"px")}})},xr=function(e){var t=e.children;return c.createElement("ul",{className:vn},$(t).call(t,(function(e,t){return c.createElement("li",{className:wn},c.createElement("div",{className:yn},t+1),c.createElement("div",null,e))})))},Tr=function(e){var t=e.url;return c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Connect to Line"})),c.createElement(c.Fragment,null,c.createElement(xr,null,[c.createElement(c.Fragment,null,c.createElement("p",null,c.createElement(M.Trans,{id:"Connect to your Line account by scanning the QR code below with your device."})),c.createElement(br,{value:t,size:219})),c.createElement(M.Trans,{id:"Send the prepopulated message with your conversation code to continue the conversation on Line"})]),c.createElement("a",{href:t,className:_n,target:"_blank",rel:"noopener noreferrer"},c.createElement("button",{className:Ln},c.createElement(M.Trans,{id:"Login with email instead"})))))},Ir=function(e){var t=e.url;return c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Connect to Telegram"})),c.createElement(c.Fragment,null,c.createElement(xr,null,[c.createElement(c.Fragment,null,c.createElement("p",null,c.createElement(M.Trans,{id:"Open Telegram on your phone"})),c.createElement(br,{value:t,size:219})),c.createElement(M.Trans,{id:"Go to Settings > Devices > Scan QR code"}),c.createElement(M.Trans,{id:"Scan this image to Log In"})]),c.createElement("p",{className:gn},c.createElement(M.Trans,{id:"Or open <0>Telegram Web</0> or <1>the Telegram App</1>",components:{0:c.createElement("a",{href:t,className:_n,target:"_blank",rel:"noopener noreferrer"}),1:c.createElement("a",{href:t,className:_n,target:"_blank",rel:"noopener noreferrer"})}}))))},Cr="styles_button__3Yr7O",Sr="styles_animated__z4Lsj",Mr="styles_primary__15nU3",Br="styles_outline__3dJBo",Or="styles_secondary__3o6Gs",Lr="styles_buttonLink__1MAYN",Rr="styles_center__1aiht",Dr=function(e){var t,n,r,a=e.onClick,o=e.primary,s=e.outline,u=e.link,l=e.children,A=i(null),d=Oe(t=Oe(n=Oe(r="".concat(Cr," ")).call(r,Lr," ")).call(n,o?Mr:""," ")).call(t,s?Br:"");return c.createElement("a",{href:u,onClick:function(){A.current&&A.current.classList.add(Sr),a&&a()},className:d,target:"_blank",rel:"noopener noreferrer"},l)},Fr=function(e){var t=e.url;return c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Connect to WhatsApp"})),$n?c.createElement(c.Fragment,null,c.createElement("p",null,c.createElement(M.Trans,{id:"Open WhatsApp below and send the prepopulated message that appears on your screen to continue the conversation."})),c.createElement("div",{className:In},c.createElement(Dr,{outline:!0,link:t},c.createElement(M.Trans,{id:"Open WhatsApp"})))):c.createElement(c.Fragment,null,c.createElement(xr,null,[c.createElement(c.Fragment,null," ",c.createElement("p",null,c.createElement(M.Trans,{id:"Connect to your WhatsApp account by scanning the QR code below."})),c.createElement(br,{value:t,size:219})),c.createElement(M.Trans,{id:"Send the prepopulated message with your conversation code to continue the conversation on WhatsApp."})]),c.createElement("p",null,c.createElement(M.Trans,{id:"If you want to open WhatsApp on your desktop just click <0>here</0>.",components:{0:c.createElement("a",{href:t,className:_n,target:"_blank",rel:"noopener noreferrer"})}}))))},Ur=function(e){var t=e.url;return c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Connect to Facebook Messenger"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Connect to your account below and continue the conversation there."})),c.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener",className:bn},c.createElement(ur,{channel:"facebook"}),c.createElement("p",{className:kn},c.createElement(M.Trans,{id:"Authorize Facebook Messenger"}))))},Nr=z("String").trim,Pr=String.prototype,Qr=e("N",(function(e){var t=e.trim;return"string"==typeof e||e===Pr||e instanceof String&&t===Pr.trim?Nr:t})),Vr=function(e){return c.createElement("span",e)},jr=e("H",(function(e){var t,n,r,a,o=e.id,s=e.onClick,u=e.disabled,l=e.type,A=void 0===l?"submit":l,d=e.executeCallbackAfterAnimation,f=e.primary,p=e.secondary,m=e.outline,h=e.ariaLabel,v=e.cypressTag,g=e.center,y=e.children,w=i(null),_=Qr(t=Oe(n=Oe(r=Oe(a="".concat(Cr," ")).call(a,f?Mr:""," ")).call(r,m?Br:""," ")).call(n,p?Or:"")).call(t),E=g?Vr:c.Fragment,b=g?{className:Rr}:{};return c.createElement("button",{id:o,"data-testid":v,disabled:u,onClick:function(){w.current&&w.current.classList.add(Sr),s&&!d&&s()},className:_,type:A,ref:w,"aria-label":h,onAnimationEnd:function(){w.current&&w.current.classList.remove(Sr),s&&d&&s()}},c.createElement(E,b,y))})),Hr="styles_inputWrapper__3g58s",Wr="styles_input__WAvqH",zr="styles_buttonWrapper__1tJNn",Gr="styles_isError__1nbpx",qr=function(e){var t,n=e.name,a=e.defaultValue,i=e.type,s=void 0===i?"text":i,u=e.onChange,l=e.placeholder,A=e.withButton,d=e.autocomplete,f=void 0===d?"on":d,p=e.buttonIcon,m=e.forwardRef,h=e.miniumValue,v=e.isError,g=e.style,y=r(a||""),w=Ue(y,2),_=w[0],E=w[1];o((function(){u&&u(_)}),[_,u]);var b=Oe(t="".concat(Wr," ")).call(t,v?Gr:"");return c.createElement("div",{className:Hr},c.createElement("input",{type:s,className:b,name:n,placeholder:l,ref:m,autoComplete:f?"on":"off",onChange:function(e){var t,n=e.target.value;E(h&&!Z(n).call(n,h)||h&&!n?Oe(t="".concat(h)).call(t,n):n)},value:_,style:g}),A&&c.createElement("div",{className:zr},c.createElement(jr,null,p)))};e("U",/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/),e("W",/https?:\/\/wa.me\/([0-9]+)(\?text=([a-zA-Z0-9+]+))?/);!function(e){e[e.EnterEmail=0]="EnterEmail",e[e.EnterOTP=1]="EnterOTP",e[e.Done=2]="Done"}(fr||(fr={}));var Yr,Kr=new RegExp(/^\S+@\S+[.][0-9a-z]+$/),Zr=function(e){var t=e.closeModal,n=e.token,a=e.platformIdentifier,o=Xi().sendEvent,s=r(fr.EnterEmail),u=Ue(s,2),l=u[0],A=u[1],d=r(""),f=Ue(d,2),p=f[0],m=f[1],h=i(0),v=r(void 0),g=Ue(v,2),y=g[0],w=g[1],_=rr().track,E=r(""),b=Ue(E,2),k=b[0],x=b[1],T=function(){k&&""!==k&&(A(fr.Done),h.current=h.current+1,_("convo_bridging_submit_code",{label:"email",value:h.current}),o({type:"ConversationBridgingOTPVerify",platform:"email",platformIdentifier:a,token:k,identifier:p}))},I=function(){h.current=h.current+1,_("convo_bridging_submit_opt",{label:"email",value:h.current}),o({type:"ConversationBridgingOTPStart",platform:"email",platformIdentifier:a,token:n,identifier:p,language:""})},C=function(e){if(e.preventDefault(),l===fr.EnterEmail){var t=Kr.test(p);w(!t),p&&t&&(_("convo_bridging_submit_opt",{label:"email"}),o({type:"ConversationBridgingOTPStart",platform:"email",platformIdentifier:a,token:n,identifier:p,language:""}),A(fr.EnterOTP))}l===fr.EnterEmail&&T()};return c.createElement(c.Fragment,null,l===fr.EnterEmail&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Continue via Email"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Add your email address below and well send you an email as soon as possible."})),c.createElement("div",{className:Cn},c.createElement("h4",null,"Your email"),c.createElement("form",{className:Sn,onSubmit:C},c.createElement(qr,{name:"email",onChange:function(e){m(e)},placeholder:"name@email.com",isError:y}),c.createElement("div",{className:Mn},c.createElement(jr,{primary:!0,type:"submit"},c.createElement(M.Trans,{id:"Send"})))))),l===fr.EnterOTP&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Verify your email"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Weve sent code to {userEmail} with a verification code. Write the code below.",values:{userEmail:p}})),c.createElement("div",{className:Cn},c.createElement("h4",null,"Your code"),c.createElement("form",{className:Sn,onSubmit:C},c.createElement(qr,{name:"code",onChange:function(e){x(e)}}),c.createElement("div",{className:Mn},c.createElement(jr,{primary:!0,onClick:T},c.createElement(M.Trans,{id:"Verify"})))),c.createElement("p",{className:Bn},c.createElement(M.Trans,{id:"Didnt receive an email? <0>Resend email</0>",components:{0:c.createElement("span",{onClick:I,onKeyPress:I,className:On,role:"button",tabIndex:0})}})))),l===fr.Done&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Your conversation is linked"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Youve got mail! You can continue this conversation by replying."})),c.createElement("div",{className:Cn},c.createElement(jr,{outline:!0,onClick:t},c.createElement(M.Trans,{id:"Back to Live Chat"})))))},Jr=wr((function(){return t.import("./Flags-chunk-nomodule-ed725866.js")}));!function(e){e[e.EnterPhone=0]="EnterPhone",e[e.EnterOTP=1]="EnterOTP",e[e.Done=2]="Done"}(Yr||(Yr={}));var Xr="+31",$r=function(e){var n=e.closeModal,a=e.token,i=e.platformIdentifier,s=Xi().sendEvent,l=r(Yr.EnterPhone),A=Ue(l,2),d=A[0],f=A[1],p=r(Xr),m=Ue(p,2),h=m[0],v=m[1],g=r(""),y=Ue(g,2),w=y[0],_=y[1],E=r(""),b=Ue(E,2),k=b[0],x=b[1],T=r(!1),I=Ue(T,2),C=I[0],S=I[1],B=rr().track,O=r(void 0),L=Ue(O,2),R=L[0],D=L[1];o((function(){h!==Xr&&S(!0)}),[h]);var F=function(){var e=He(Pe.mark((function e(n){var r,a,o;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.import("./phoneNumber-chunk-nomodule-fdf53d8c.js").then((function(e){return e.i}));case 2:r=e.sent,a=r.default,o=new a(n),D(o.isValid()),_(o.getRegionCode());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){k&&""!==k&&(f(Yr.Done),B("convo_bridging_submit_code",{label:"sms"}),s({type:"ConversationBridgingOTPVerify",platform:"sms",platformIdentifier:i,token:k,identifier:h}))},N=function(){B("convo_bridging_submit_code",{label:"sms"}),s({type:"ConversationBridgingOTPStart",platform:"sms",platformIdentifier:i,token:a,language:"",identifier:h})},P=function(e){if(e.preventDefault(),d===Yr.EnterPhone&&R){var t=null==h?void 0:h.replace("+","").replaceAll(" ","");f(Yr.EnterOTP),B("convo_bridging_submit_opt",{label:"sms"}),s({type:"ConversationBridgingOTPStart",platform:"sms",platformIdentifier:i,token:a,language:"",identifier:t})}d===Yr.EnterOTP&&U()};return c.createElement(c.Fragment,null,d===Yr.EnterPhone&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Continue via SMS"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Add your phone number below and well send you an SMS message to continue this conversation."})),c.createElement("div",{className:Cn},c.createElement("h4",null,"Your phone number"),c.createElement("form",{className:Sn,onSubmit:P},c.createElement("div",{className:Dn},c.createElement(u,{fallback:c.createElement("span",{role:"img","aria-label":"World Emoji",style:{marginTop:"-4px",display:"block"}},"")},c.createElement(Jr,{country:w}))),c.createElement(qr,{name:"phone",type:"tel",defaultValue:Xr,miniumValue:"+",onChange:function(e){v(e),F(e)},isError:C&&!1===R,style:{paddingLeft:"32px"}}),c.createElement("div",{className:Mn},c.createElement(jr,{primary:!0,onClick:F},c.createElement(M.Trans,{id:"Send"})))),!1===R&&h&&C?c.createElement("span",{className:Rn},c.createElement(M.Trans,{id:"The phone number entered is invalid"})):null)),d===Yr.EnterOTP&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Verify your phone number"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Weve sent an SMS to {phoneNumber} with a code to verify your phone number. Write the code below.",values:{phoneNumber:h}})),c.createElement("div",{className:Cn},c.createElement("h4",null,"Your code"),c.createElement("form",{className:Sn,onSubmit:P},c.createElement(qr,{name:"code",onChange:function(e){x(e)}}),c.createElement("div",{className:Mn},c.createElement(jr,{primary:!0,onClick:U},c.createElement(M.Trans,{id:"Verify"})))),c.createElement("p",{className:Bn},c.createElement(M.Trans,{id:"Didnt receive a message? <0>Resend SMS</0>",components:{0:c.createElement("span",{onClick:N,onKeyPress:N,className:On,role:"button",tabIndex:0})}})))),d===Yr.Done&&c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Your Live Chat conversation is connected to SMS"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Your Live Chat conversation is now linked to SMS."})),c.createElement("div",{className:Cn},c.createElement(jr,{outline:!0,onClick:n},c.createElement(M.Trans,{id:"Back to Live Chat"})))))},ea=function(e){var t=e.url;return c.createElement(c.Fragment,null,c.createElement("h3",null,c.createElement(M.Trans,{id:"Connect to Twitter"})),c.createElement("p",null,c.createElement(M.Trans,{id:"Connect to your account below and continue the conversation there."})),c.createElement("br",null),c.createElement("p",null,c.createElement(M.Trans,{id:"Once you have sent the prefilled message on Twitter, it can take up to two minutes to link your accounts."})),c.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener",className:xn},c.createElement(ur,{channel:"twitter"}),c.createElement("p",{className:Tn},c.createElement(M.Trans,{id:"Authorize Twitter"}))))},ta=function(e){var t=e.channel,n=e.url,r=e.closeModal,a=e.token,o=e.platformIdentifier;return t?c.createElement("div",{className:hn},c.createElement("div",{className:En},c.createElement(ur,{channel:t})),"whatsapp"===t&&c.createElement(Fr,{url:n}),"facebook"===t&&c.createElement(Ur,{url:n}),"twitter"===t&&c.createElement(ea,{url:n}),"telegram"===t&&c.createElement(Ir,{url:n}),"line"===t&&c.createElement(Tr,{url:n}),("email"===t||"email_freemium"===t)&&c.createElement(Zr,{channel:t,url:n,closeModal:r,token:a,platformIdentifier:o}),"sms"===t&&c.createElement($r,{channel:t,url:n,closeModal:r,token:a,platformIdentifier:o})):null},na="styles_modal__1fhDd",ra="styles_body__-y3gH",aa="styles_closeIcon__13YH2",oa=function(e){var t=e.isOpen,n=e.element,a=e.onClose,i=e.children,s=r(t),u=Ue(s,2),A=u[0],d=u[1];o((function(){d(t)}),[t]);var f=function(){d(!1),a&&a()};return A?l(c.createElement("div",{className:na},c.createElement("div",{className:ra},c.createElement("div",{className:aa,onClick:f,onKeyPress:f,role:"button","aria-labelledby":"modal-close-label",tabIndex:0},c.createElement("span",{id:"modal-close-label",hidden:!0},c.createElement(M.Trans,{id:"Close modal"})),c.createElement(Kn,{width:24,height:24})),i)),n.current):null},ia=[],sa=e("t",(function(e){var t=Xi().sendMessage,n=i(void 0),r=dt("showConvoBridgingButtons",!0,e),s=r.storageState,c=r.setStorageState;return o((function(){if(!n.current){var t=e;ia.push({key:t,listener:c}),n.current=t}return function(){ia=fe(ia).call(ia,(function(e){return e.key===n.current})),n.current=void 0}}),[c,e]),[s,a((function(e,r){var a;(c(e),oe(ia).call(ia,(function(t){var r=t.listener;t.key===n.current&&r(e)})),r)&&t(null!==(a=or[r])&&void 0!==a?a:r,{type:"ConversationBridgingLinked"})}),[c,t])]})),ca=["facebook","whatsapp","telegram","email","email_freemium","sms","line","twitter"],ua=(e("a8",(function(e){var t,n,a=e.parentElement,u=e.buttons,l=e.conversationBridgingCode,A=e.createdAt,d=e.avatarUrl,f=Xi(),p=f.sendFakeOutgoingMessage,m=f.sendMessage,h=f.isPreviewMode,v=f.config,g=rr().track,y=r(!1),w=Ue(y,2),_=w[0],E=w[1],b=r(void 0),k=Ue(b,2),x=k[0],T=k[1],I=r(void 0),C=Ue(I,2),B=C[0],O=C[1],L=r(""),R=Ue(L,2),D=R[0],F=R[1],U=sa(l),N=Ue(U,2),P=N[0],Q=N[1],V=fn(),j=Ue(V,2),H=j[0],W=j[1];o((function(){_&&!P&&E(!1)}),[P,_]);var z=function(){T(void 0),F(""),E(!1)},G=Oe(t="".concat(an.message," ")).call(t,an.outgoing),q=Oe(n="".concat(an.messageWrapper," ")).call(n,an.outgoing),Y=function(e){if(!h){var t=W(e),n=null==t?void 0:t.platform;Z(ca).call(ca,n)&&(O(null==t?void 0:t.platformIdentifier),T(n),g("conv_bridge_choice",{label:n}),F(cr({platform:n,platformIdentifier:t.platformIdentifier,conversationCode:l})),E(!0))}},K=function(){var e=He(Pe.mark((function e(){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return Q(!1),g("conv_bridge_choice",{label:"livechat"}),e.next=6,m(S._("Stay on Live Chat"));case 6:return e.next=8,p(S._("Well reach you on Live Chat as soon as possible!"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=i(!1);o((function(){J.current||h||(g("conv_bridge_choice_shown",{label:"livechat"}),J.current=!0)}),[h,g]);var X=s((function(){var e=dn(new Date(A));return Math.floor(e/3600)>1}),[A]);return o((function(){X&&P&&Q(!1)}),[P,X,Q]),H?c.createElement(c.Fragment,null,c.createElement("div",{className:q},c.createElement("div",{className:cn},d&&v.showAgents?c.createElement("img",{src:d,alt:"agent_photo"}):c.createElement(Xn,{width:12,height:12})),c.createElement("div",{className:G},c.createElement(M.Trans,{id:"The wait time for Live Chat is a bit longer than usual, which platform can we reach you on?"})),P&&c.createElement("div",{className:on},null==u?void 0:$(u).call(u,(function(e){var t,n=W(e),r=Oe(t="".concat(e.text,":")).call(t,e.value);return c.createElement(mn,{id:r,key:r,onClick:Y,fullWidth:!0,icon:(null==n?void 0:n.platform)&&c.createElement(ur,{channel:null==n?void 0:n.platform}),text:e.text,value:e.value})})),c.createElement("span",{className:sn,onClick:K,onKeyPress:K,role:"button",tabIndex:0},c.createElement(M.Trans,{id:"Stay on Live Chat"})))),c.createElement(oa,{isOpen:_,element:a,onClose:z},c.createElement(ta,{channel:x,url:D,closeModal:z,token:l,platformIdentifier:B}))):null})),[{id:"1",type:"text",payload:{text:S._("Hi there! How can I help you today?")},from:"agent",direction:"outgoing",status:"received",createdAt:new Date,metadata:{source:{conversationBridging:{code:"123"}}}},{id:"2",payload:{text:S._("Id like to update my delivery address")},from:"user",direction:"incoming",status:"delivered",createdAt:new Date}]),la=Qe;function Aa(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=Aa(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=Aa(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var fa=[],pa=function(e){var t,n={};return oe(t=te(e)).call(t,(function(t){n[t]=function(e){return W(e)}(e[t])})),n},ma=function(e,t,n,r){var a,o,i,s;Z(fa).call(fa,t)&&r&&(a={message:"SET_ATTRIBUTE",extras:da({uid:n,location:e},pa(r))},o=a.message,i=a.extras,s=a.tags,k(o,{level:x.Info,extra:i||{},tags:s||{}}))},ha=function(){var e=He(Pe.mark((function e(){var n,r,a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.import("./ua-parser-chunk-nomodule-71665292.js").then((function(e){return e.u}));case 2:return a=e.sent,o=a.UAParser,e.next=6,new o(window.navigator.userAgent);case 6:return i=e.sent,e.abrupt("return",null!==(n=null===(r=i.getOS())||void 0===r?void 0:r.name)&&void 0!==n?n:"");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function va(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=va(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=va(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var ya=function(){var e=He(Pe.mark((function e(n){var r,a,o;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.import("./firebase-app-chunk-nomodule-f9fee403.js");case 2:r=e.sent,a=r.getApp,o=r.initializeApp,e.prev=5,a(n),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),e.next=13,o({apiKey:"AIzaSyC5bqezR9O4Bno0kLvzdeAnBFMo2VazwcQ",databaseURL:"https://mb-integrations-prod.firebaseio.com",projectId:"mb-integrations-prod",authDomain:"mb-integrations-prod.firebaseapp.com",storageBucket:"mb-integrations-prod.appspot.com",messagingSenderId:"287484310048",appId:"1:287484310048:web:9c0a5f119bbcc423644245"},n);case 13:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t){return e.apply(this,arguments)}}(),wa=function(){var e=He(Pe.mark((function e(n){var r,a,o,i,s,c,u,l,A,d,f,p;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.import("./firebase-app-chunk-nomodule-f9fee403.js");case 2:return r=e.sent,a=r.getApp,e.next=6,t.import("./firebase-auth-chunk-nomodule-c0fc0cc3.js").then((function(e){return e.B}));case 6:return o=e.sent,i=o.getAuth,s=o.signInAnonymously,c=o.signInWithCustomToken,e.next=12,ya(n);case 12:if(lt()){e.next=31;break}return e.next=15,t.import("./firebase-auth-chunk-nomodule-c0fc0cc3.js").then((function(e){return e.B}));case 15:return u=e.sent,l=u.getAuth,A=u.setPersistence,d=u.inMemoryPersistence,f=u.browserLocalPersistence,p=l(a(n)),e.prev=21,e.next=24,A(p,f);case 24:e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(21),nt(e.t0,"failed to change storage persistence"),e.next=31,A(p,d);case 31:return e.abrupt("return",{auth:i(a(n)),signInAnonymously:s,signInWithCustomToken:c});case 32:case"end":return e.stop()}}),e,null,[[21,26]])})));return function(t){return e.apply(this,arguments)}}(),_a=function(){var e=He(Pe.mark((function e(n){var r,a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.import("./firebase-app-chunk-nomodule-f9fee403.js");case 2:return r=e.sent,a=r.getApp,e.next=6,t.import("./firebase-storage-chunk-nomodule-d5d0669b.js");case 6:return o=e.sent,i=o.initializeFirestore(a(n),{experimentalAutoDetectLongPolling:!0}),e.abrupt("return",ga(ga({},o),{},{database:i}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ea(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=Ea(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=Ea(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var ka=function(e){var t;if(e&&te(e).length){var n=St(t=lr(e)).call(t,(function(e,t){var n,r=Ue(t,2),a=r[0],o=r[1],i=W(o);return Z(n=["string","number","boolean"]).call(n,i)||null===o?ba(ba({},e),{},ze({},a,o)):e}),{});if(te(n).length)return{attributes:ba({},n)}}},xa=function(){try{return Intl.DateTimeFormat("en").resolvedOptions().timeZone||""}catch(e){return console.error(e,"error while getting timezone"),""}};function Ta(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=Ta(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=Ta(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var Ca=function(e){var t,n,r,a,o,i,s,c,u,l,A,d,f,p=null,m=null;return{subscribeToMessagesMessages:(f=He(Pe.mark((function t(n,r,a,o){var i,s,c,u,l,A,d,f,p,h,v,g;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:u=t.sent,l=u.database,A=u.query,d=u.collection,f=u.orderBy,p=u.onSnapshot,h=u.endBefore,v=A.apply(void 0,Oe(i=[d(l,Oe(s=Oe(c="channels/".concat(e,"/users/")).call(c,n,"/threads/")).call(s,r,"/events")),f("createdAt","desc")]).call(i,Se(m?[h(m)]:[]))),g=p(v,(function(e){var t=[];oe(e).call(e,(function(e){var n=e.data(),r=n.createdAt,a=n.message,o=qn(n,["createdAt","message"]);t.unshift(Ia(Ia({id:e.id,createdAt:r&&r.toDate()},o),a))})),a(t)}),(function(t){o.current=void 0,rt(t,"error getting messages",e,n)})),o.current=g;case 12:case"end":return t.stop()}}),t)}))),function(e,t,n,r){return f.apply(this,arguments)}),getInitialMessages:(d=He(Pe.mark((function t(n,r,a){var o,i,s,c,u,l,A,d,f,h;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:return s=t.sent,c=s.database,u=s.query,l=s.collection,A=s.orderBy,d=s.onSnapshot,f=s.limit,h=u(l(c,Oe(o=Oe(i="channels/".concat(e,"/users/")).call(i,n,"/threads/")).call(o,r,"/events")),A("createdAt","desc"),f(50)),t.abrupt("return",new la((function(t,r){var o=d(h,(function(e){var n,r=[];p=e.docs[e.docs.length-1],m=null!==(n=e.docs[0])&&void 0!==n&&n.metadata.hasPendingWrites?null:e.docs[0],oe(e).call(e,(function(t){if(!e.metadata.hasPendingWrites){var n=t.data(),a=n.createdAt,o=n.message,i=qn(n,["createdAt","message"]);r.unshift(Ia(Ia({id:t.id,createdAt:a&&a.toDate()},i),o))}})),o(),t(r)}),(function(t){o(),rt(t,"error getting initial messages",e,n),r(t)}));a.current=o})));case 11:case"end":return t.stop()}}),t)}))),function(e,t,n){return d.apply(this,arguments)}),fetchMoreMessages:(A=He(Pe.mark((function t(n,r){var a,o,i,s,c,u,l,A,d,f,m;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:if(i=t.sent,s=i.database,c=i.query,u=i.collection,l=i.orderBy,A=i.onSnapshot,d=i.limit,f=i.startAfter,p){t.next=12;break}return t.abrupt("return",la.resolve({messages:[],shouldNotFetchMore:!0}));case 12:return m=c(u(s,Oe(a=Oe(o="channels/".concat(e,"/users/")).call(o,n,"/threads/")).call(a,r,"/events")),l("createdAt","desc"),d(50),f(p)),t.abrupt("return",new la((function(t,r){var a=A(m,(function(e){var n=[];p=e.docs[e.docs.length-1],oe(e).call(e,(function(e){var t=e.data(),r=t.createdAt,a=t.message,o=qn(t,["createdAt","message"]);n.unshift(Ia(Ia({id:e.id,createdAt:r&&r.toDate()},o),a))}));var r=n.length<50;t({messages:n,shouldNotFetchMore:r}),a()}),(function(t){a(),rt(t,"error getting more messages",e,n)}))})));case 14:case"end":return t.stop()}}),t)}))),function(e,t){return A.apply(this,arguments)}),getThreads:(l=He(Pe.mark((function t(n,r){var a,o,i,s,c,u;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:return a=t.sent,o=a.collection,i=a.query,s=a.limit,c=a.database,u=a.onSnapshot,t.abrupt("return",new la((function(t,a){var l,A=i(o(c,Oe(l="channels/".concat(e,"/users/")).call(l,n,"/threads")),s(1)),d=u(A,(function(e){var n,a={};oe(n=e.docs).call(n,(function(e){var n=e.data(),o=n.lastMessageAt,i=qn(n,["lastMessageAt"]);a=ze({},e.id,Ia(Ia({},i),{},{lastMessageAt:o&&e.data().lastMessageAt.toDate()})),d(),r.current=void 0,t(a)}))}),(function(t){rt(t,"error getting threads",e,n),d(),r.current=void 0,a(t)}));r.current=d})));case 9:case"end":return t.stop()}}),t)}))),function(e,t){return l.apply(this,arguments)}),createUser:(u=He(Pe.mark((function t(n){var r,a,o,i,s,c,u,l;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return r=t.sent,a=r.collection,o=r.database,i=r.serverTimestamp,s=r.doc,c=r.getDoc,u=r.setDoc,mr("livechatwidget_create_user_base"),l=s(a(o,"channels/".concat(e,"/users")),"".concat(n)),t.next=14,c(l);case 14:if(!t.sent.exists()){t.next=17;break}return t.abrupt("return");case 17:return t.next=19,u(l,{firstName:null,lastName:null,locale:"".concat(navigator.language),timezone:xa(),createdAt:i(),acceptedTermsAndConditions:null,acceptedAt:null},{merge:!0});case 19:mr("livechatwidget_create_user_success"),t.next=27;break;case 22:throw t.prev=22,t.t0=t.catch(0),mr("livechatwidget_create_user_error"),rt(t.t0,"error creating user",e,n),t.t0;case 27:case"end":return t.stop()}}),t,null,[[0,22]])}))),function(e){return u.apply(this,arguments)}),sendMessage:(c=He(Pe.mark((function t(n,r,a,o,i,s){var c,u,l,A,d,f,p,m,h,v,g;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return l=t.sent,A=l.collection,d=l.database,f=l.serverTimestamp,p=l.addDoc,mr("livechatwidget_send_message_base"),t.next=11,ha();case 11:return m=t.sent,h=ka(null==o?void 0:o.attributes),ma("AFTER_SANITIZE",e,n,null==h?void 0:h.attributes),v={text:a},s&&s.length>0&&(v.attachments=$(s).call(s,(function(e){return{id:e.id,contentLength:e.file.size,mimeType:e.mimeType}}))),g=A(d,Oe(c=Oe(u="channels/".concat(e,"/users/")).call(u,n,"/threads/")).call(c,r,"/events")),t.next=19,p(g,Ia({createdAt:f(),message:{from:n,direction:"incoming",status:"sent",payload:v},metadata:Ia(Ia({},o),{},{os:m,locale:navigator.languages||[""],userAgent:navigator.userAgent,timezone:"".concat(Intl.DateTimeFormat().resolvedOptions().timeZone),widgetLoads:(y=e,st("widgetLoadCount:".concat(y))||0)},h)},i?{event:i}:void 0));case 19:mr("livechatwidget_send_message_success"),t.next=27;break;case 22:throw t.prev=22,t.t0=t.catch(0),mr("livechatwidget_send_message_error"),rt(t.t0,"error sending message",e,n),t.t0;case 27:case"end":return t.stop()}var y}),t,null,[[0,22]])}))),function(e,t,n,r,a,o){return c.apply(this,arguments)}),sendFakeOutgoingMessage:(s=He(Pe.mark((function t(n,r,a){var o,i,s,c,u,l,A,d;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return s=t.sent,c=s.collection,u=s.addDoc,l=s.database,A=s.serverTimestamp,d=c(l,Oe(o=Oe(i="channels/".concat(e,"/users/")).call(i,n,"/threads/")).call(o,r,"/events")),t.next=11,u(d,{createdAt:A(),message:{from:n,direction:"outgoing",status:"sent",payload:{text:a}}});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),rt(t.t0,"error sending fake message",e,n);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),function(e,t,n){return s.apply(this,arguments)}),getUserDetails:(i=He(Pe.mark((function t(n){var r,a,o,i,s,c,u;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return r=t.sent,a=r.collection,o=r.doc,i=r.database,s=r.getDoc,c=o(a(i,"channels/".concat(e,"/users")),"".concat(n)),t.next=11,s(c);case 11:return u=t.sent,t.abrupt("return",u.data());case 15:throw t.prev=15,t.t0=t.catch(0),rt(t.t0,"error fetching user details",e,n),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])}))),function(e){return i.apply(this,arguments)}),setUserAcceptedTerms:(o=He(Pe.mark((function t(n,r){var a,o,i,s,c,u;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,mr("js_livechatwidget_terms_choice",{accepted:"".concat(r)}),t.next=4,_a(e);case 4:return a=t.sent,o=a.collection,i=a.doc,s=a.database,c=a.updateDoc,u=a.serverTimestamp,t.next=12,c(i(o(s,"channels/".concat(e,"/users")),"".concat(n)),{acceptedTermsAndConditions:r,acceptedAt:u()});case 12:return t.abrupt("return",t.sent);case 15:t.prev=15,t.t0=t.catch(0),rt(t.t0,"error setting terms accepted",e,n);case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),function(e,t){return o.apply(this,arguments)}),getConnectedAgent:(a=He(Pe.mark((function t(n){var r,a,o,i;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:return r=t.sent,a=r.doc,o=r.database,i=r.getDoc,t.abrupt("return",new la(function(){var t=He(Pe.mark((function t(r,s){var c,u,l;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a(o,"channels/".concat(e,"/agents"),"".concat(n)),t.next=4,i(c);case 4:u=t.sent,l=u.data(),r(l),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),rt(t.t0,"error fetching connected agent",e),s(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()));case 7:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)}),getAgents:(r=He(Pe.mark((function t(){var n,r,a,o,i,s,c;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_a(e);case 2:return n=t.sent,r=n.collection,a=n.query,o=n.where,i=n.database,s=n.getDocs,c=n.limit,t.abrupt("return",new la(function(){var t=He(Pe.mark((function t(n,u){var l,A,d;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l=[],A=a(r(i,"channels/".concat(e,"/agents")),o("avatarUrl",">",""),c(5)),t.next=5,s(A);case 5:return d=t.sent,oe(d).call(d,(function(e){var t=e.data();l.push(t)})),t.abrupt("return",n(l));case 10:t.prev=10,t.t0=t.catch(0),rt(t.t0,"error fetching Agents",e),u(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()));case 10:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),getFileAttachment:(n=He(Pe.mark((function t(n,r,a){var o,i,s,c,u,l,A;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return i=t.sent,s=i.collection,c=i.doc,u=i.database,l=i.onSnapshot,A=c(s(u,Oe(o="channels/".concat(e,"/users/")).call(o,n,"/uploads")),"".concat(r)),t.abrupt("return",l(A,(function(e){var t=e.data();a(t)})));case 12:t.prev=12,t.t0=t.catch(0),rt(t.t0,"error getting attachment");case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),function(e,t,r){return n.apply(this,arguments)}),updateMessageStatus:(t=He(Pe.mark((function t(n,r,a){var o,i,s,c,u,l,A,d;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_a(e);case 3:return c=t.sent,u=c.doc,l=c.database,A=c.updateDoc,d=u(l,Oe(o=Oe(i=Oe(s="channels/".concat(e,"/users/")).call(s,n,"/threads/")).call(i,r,"/events/")).call(o,a)),t.next=10,A(d,{"message.status":"read"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),rt(t.t0,"error updating message status");case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),function(e,n,r){return t.apply(this,arguments)})}},Sa=rn("auth"),Ma=function e(t){return{logout:(s=He(Pe.mark((function n(){var r,a,o,i,s,c;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,wa(t);case 3:return r=n.sent,a=r.auth,n.next=7,a.signOut();case 7:return n.next=9,e(t).signInAnonymously();case 9:return o=n.sent,i=o.uid,s=o.token,c=o.expirationTime,n.abrupt("return",{uid:i,token:s,expirationTime:c});case 16:throw n.prev=16,n.t0=n.catch(0),nt(n.t0,"failed to logout and refresh user session"),n.t0;case 20:case"end":return n.stop()}}),n,null,[[0,16]])}))),function(){return s.apply(this,arguments)}),signInAnonymously:(i=He(Pe.mark((function n(){var r,a,o,i,s,c,u,l;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,Sa.info("Starting authorizing user anonymously..."),n.next=4,wa(t);case 4:return r=n.sent,a=r.auth,o=r.signInAnonymously,n.next=9,o(a);case 9:return i=n.sent,mr("js_livechatwidget_user_created"),s=i.user.uid,n.next=14,i.user.getIdTokenResult(!1);case 14:return c=n.sent,u=c.token,l=c.expirationTime,n.next=19,e(t).createUserInFireStore(s);case 19:return Sa.success("User authorized successfully...",{"user id":s}),n.abrupt("return",{uid:s,token:u,expirationTime:l});case 23:throw n.prev=23,n.t0=n.catch(0),nt(n.t0,"failed to sign in Anonymously"),n.t0;case 27:case"end":return n.stop()}}),n,null,[[0,23]])}))),function(){return i.apply(this,arguments)}),getCurrentUser:function(){return new la(function(){var e=He(Pe.mark((function e(n,r){var a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa(t);case 2:a=e.sent,o=a.auth,i=o.onAuthStateChanged(function(){var e=He(Pe.mark((function e(t){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n(t)}catch(e){nt(e,"failed to get user from firebase"),r(e)}finally{null==i||i()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},identifyVisitor:(o=He(Pe.mark((function n(r){var a,o,i,s,c,u,l,A,d,f,p,m,h,v,g,y,w,_,E;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(t).getCurrentUser();case 3:return a=n.sent,o=a.uid,n.next=7,a.getIdTokenResult();case 7:if(i=n.sent,s=i.token,c=i.expirationTime,o!==r){n.next=12;break}return n.abrupt("return",{token:s,expirationTime:c,uid:r});case 12:return Sa.info("start identifyVisitor",{}),n.next=15,Ca(t).getUserDetails(o);case 15:if(null==(u=n.sent)||!u.createdAt){n.next=24;break}return n.next=19,xt(r,t,o,s);case 19:A=n.sent,d=A.token,l=d,n.next=31;break;case 24:return n.next=26,e(t).createUserInFireStore(o);case 26:return n.next=28,xt(r,t,o,s);case 28:f=n.sent,p=f.token,l=p;case 31:return n.prev=31,n.next=34,wa(t);case 34:return m=n.sent,h=m.auth,v=m.signInWithCustomToken,Sa.info("identified user",{identifiedUserToken:l}),n.next=40,v(h,l);case 40:return g=n.sent,y=g.user.uid,n.next=44,g.user.getIdTokenResult();case 44:return w=n.sent,_=w.token,E=w.expirationTime,n.next=49,e(t).createUserInFireStore(y);case 49:return n.abrupt("return",{token:_,expirationTime:E,uid:y});case 52:throw n.prev=52,n.t0=n.catch(31),nt(n.t0,"failed signing in user with Custom token"),n.t0;case 56:n.next=62;break;case 58:throw n.prev=58,n.t1=n.catch(0),nt(n.t1,"failed identifying visitor"),n.t1;case 62:case"end":return n.stop()}}),n,null,[[0,58],[31,52]])}))),function(e){return o.apply(this,arguments)}),createUserInFireStore:(a=He(Pe.mark((function e(n){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Sa.info("Creating user in Firestore",{"temporary user id":n}),e.next=4,Ca(t).createUser(n);case 4:e.next=11;break;case 6:throw e.prev=6,e.t0=e.catch(0),Sa.error("Failed to Create a user in Firestore",{"temporary user id":n,error:e.t0}),nt(e.t0,"error creating a temporary user in Firestore"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return a.apply(this,arguments)}),restoreBrokenUser:(r=He(Pe.mark((function n(r){var a,o,i;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,mr("js_livechatwidget_restore_user_from_local_storage_base",{widgetId:t,currentUid:r}),Sa.warn("Found user in LocalStorage but does not exist in Firebase",{"current userId in LocalStorage":r}),n.next=5,e(t).signInAnonymously();case 5:return a=n.sent,o=a.uid,Sa.info("Identifying temporary user via MAPI",{"temporary user id":o}),n.next=10,e(t).identifyVisitor(r);case 10:return i=n.sent,mr("js_livechatwidget_restore_user_from_local_storage_success",{widgetId:t,newUid:i.uid}),n.abrupt("return",i);case 15:throw n.prev=15,n.t0=n.catch(0),nt(n.t0,"failed restoreBrokenUser"),n.t0;case 19:case"end":return n.stop()}}),n,null,[[0,15]])}))),function(e){return r.apply(this,arguments)}),refreshAuthToken:function(){return new la(function(){var e=He(Pe.mark((function e(n,r){var a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa(t);case 2:a=e.sent,o=a.auth,i=o.onAuthStateChanged(function(){var e=He(Pe.mark((function e(t){var a,o,s,c;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getIdTokenResult(!0);case 3:a=e.sent,o=a.token,s=a.expirationTime,Sa.success("Token refresh complete",{expirationTime:s}),n({token:o,expirationTime:s}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=e.t0,r(c);case 14:return e.prev=14,i(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},initialAuthorization:(n=He(Pe.mark((function n(r){var a,o,i,s,c,u,l,A,d,f,p,m,h;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(t).getCurrentUser();case 3:if(a=n.sent,Sa.info("Starting user initialization",{"current user in firebase":a,"current user Id in local storage":r}),o=null==a?void 0:a.uid,!r||o){n.next=16;break}return Sa.info("Attempting to restore user...",{"current user in fire base":a,"current user id":r}),mr("js_livechatwidget_restore_user_from_local_storage_base",{widgetId:t,currentUid:r}),n.next=11,e(t).restoreBrokenUser(r);case 11:return i=n.sent,s=i.uid,c=i.token,u=i.expirationTime,n.abrupt("return",{uid:s,token:c,expirationTime:u});case 16:if(a||r){n.next=25;break}return Sa.info("Creating new user",{"current user in fire base":a,"current user id":r}),n.next=20,e(t).signInAnonymously();case 20:return l=n.sent,A=l.uid,d=l.token,f=l.expirationTime,n.abrupt("return",{uid:A,token:d,expirationTime:f});case 25:return n.next=27,a.getIdTokenResult();case 27:return p=n.sent,m=p.token,h=p.expirationTime,Sa.success("User authorized successfully",{"user id":o}),n.abrupt("return",{token:m,expirationTime:h,uid:o});case 34:throw n.prev=34,n.t0=n.catch(0),Sa.error("Failed to Authorize user",{error:n.t0}),nt(n.t0,"failed initial authorization of user"),n.t0;case 39:case"end":return n.stop()}}),n,null,[[0,34]])}))),function(e){return n.apply(this,arguments)})};var n,r,a,o,i,s},Ba=rn("auth"),Oa=m.Reflect.construct,La=Oa;var Ra=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Da=m.Object,Fa=function(e,t){return Da.create(e,t)},Ua=m.Object.setPrototypeOf,Na=n((function(e){function t(n,r){return e.exports=t=Ua||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}));var Pa=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Fa(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Na(e,t)};var Qa=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var Va=function(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Qa(e):t},ja=m.Object.getPrototypeOf,Ha=n((function(e){function t(n){return e.exports=t=Ua?ja:function(e){return e.__proto__||ja(e)},t(n)}e.exports=t})),Wa=m.Map;var za=function(e){var t;return-1!==jn(t=Function.toString.call(e)).call(t,"[native code]")},Ga=z("Function").bind,qa=Function.prototype,Ya=function(e){var t=e.bind;return e===qa||e instanceof Function&&t===qa.bind?Ga:t},Ka=Ya,Za=Oa;var Ja=function(){if("undefined"==typeof Reflect||!Za)return!1;if(Za.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Za(Date,[],(function(){}))),!0}catch(e){return!1}},Xa=n((function(e){function t(n,r,a){return Ja()?e.exports=t=Za:e.exports=t=function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Ka(Function).apply(e,r));return n&&Na(a,n.prototype),a},t.apply(null,arguments)}e.exports=t}));function $a(e){var t=function(){if("undefined"==typeof Reflect||!La)return!1;if(La.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(La(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ha(e);if(t){var a=Ha(this).constructor;n=La(r,arguments,a)}else n=r.apply(this,arguments);return Va(this,n)}}var eo=function(e){Pa(n,e);var t=$a(n);function n(e){return Ra(this,n),t.call(this,"AuthError. ".concat(e))}return n}(n((function(e){function t(n){var r="function"==typeof Wa?new Wa:void 0;return e.exports=t=function(e){if(null===e||!za(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return Xa(e,arguments,Ha(this).constructor)}return t.prototype=Fa(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Na(t,e)},t(n)}e.exports=t}))(Error));function to(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=to(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=to(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var ro=rn("authQueuer"),ao={state:"AUTH_INITIAL"},oo=function(e,t){switch(e.state){case"AUTH_INITIAL":switch(t.type){case"AUTH_INITIALIZE":return{state:"AUTH_LOADING"}}return e;case"AUTH_LOADING":switch(t.type){case"AUTH_FAILED":return{state:"AUTH_ERROR_RETRY"};case"AUTH_READY":return{state:"AUTH_READY",data:t.data}}return e;case"AUTH_READY":switch(t.type){case"AUTH_LOGOUT":return{state:"AUTH_LOGGING_OUT"};case"AUTH_IDENTIFY":return{state:"AUTH_IDENTIFYING",data:t.data}}return e;case"AUTH_LOGGING_OUT":case"AUTH_IDENTIFYING":switch(t.type){case"AUTH_FAILED":return{state:"AUTH_ERROR_RETRY"};case"AUTH_READY":return{state:"AUTH_READY",data:t.data}}return e;case"AUTH_ERROR_RETRY":switch(t.type){case"AUTH_FAILED":return{state:"AUTH_ERROR"};case"AUTH_RESET":return{state:"AUTH_INITIAL"}}return e;default:return e}},io=rn("auth"),so={logout:{argument:!1,resolve:void 0,reject:void 0},identify:{argument:void 0,resolve:void 0,reject:void 0}},co=function(e,t){var n,s,c=(n=A(oo,ao),{machine:(s=Ue(n,2))[0],dispatch:s[1]}),u=c.machine,l=c.dispatch,d=function(e){var t=dt("userId",void 0,e),n=t.storageState,r=t.setStorageState,a=t.isStorageStateReady;return o((function(){if(a)return e&&n&&"undefined"!==n?r(n):void 0}),[n,e,r,a]),o((function(){a&&"undefined"===n&&r(void 0)}),[n,r,a]),[n,r,a]}(t),f=Ue(d,3),p=f[0],m=f[1],h=f[2],v=r(void 0),g=Ue(v,2),y=g[0],w=g[1],_=function(e){var t=i(e),n=i(void 0),s=r(0),c=Ue(s,2)[1],u=a((function(e){t.current=e(t.current),n.current=se((function(){n.current&&c((function(e){return e+1}))}),0)}),[]);o((function(){return function(){n.current&&(clearTimeout(n.current),n.current=void 0)}}),[]);var l=t.current;return{updateQueue:u,createQueue:function(t){return function(n){return t&&e[t]?n&&l[t].argument===n||l[t].resolve&&l[t].reject?la.reject(new eo(Oe(r="[".concat((new Date).toISOString(),"] ")).call(r,t," is already in progress! Ignoring the following calls"))):(ro.info("Existing queue",{queue:l}),new la((function(r,a){ro.info("Scheduling ".concat(t),{argument:n}),u((function(o){return no(no({},o),{},ze({},t,{argument:n||!0,resolve:function(n){u((function(){return e})),ro.info("Resolved ".concat(t," Queue item"),{queue:l}),r(n)},reject:function(){u((function(){return e})),a()}}))}))}))):(ro.error("Passed method which was not part of initial queue argument"),la.reject());var r}},queue:t.current}}(so),E=_.queue,b=_.createQueue,k=_.updateQueue,x=b("logout"),T=b("identify"),I=u.state,C=a(He(Pe.mark((function e(){var n;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,mr("livechat_auth_initialAuthorization_base"),e.next=4,Ma(t).initialAuthorization(p);case 4:n=e.sent,m(n.uid),w({token:n.token,expirationTime:n.expirationTime}),l({type:"AUTH_READY",data:{uid:n.uid,token:n.token,expirationTime:n.expirationTime}}),mr("livechat_auth_initialAuthorization_success"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),mr("livechat_auth_initialAuthorization_error"),nt(e.t0,"error trying to initial auth"),l({type:"AUTH_FAILED"});case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l,m,p,t]),S=a(function(){var e=He(Pe.mark((function e(n){var r,a,o,i,s;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.identify.argument){e.next=2;break}return e.abrupt("return");case 2:return mr("livechat_auth_login_base"),io.info("Start logging in user",{"new user id":n,"is user ready":I}),e.prev=4,e.next=7,Ma(t).identifyVisitor(n);case 7:r=e.sent,a=r.uid,o=r.token,i=r.expirationTime,io.success("User identified successfully with custom token",{"user id":a}),m(a),w({token:o,expirationTime:i}),E.identify.resolve({newUid:a,newToken:o,newExpirationTime:i}),l({type:"AUTH_READY",data:{uid:a,token:o,expirationTime:i}}),mr("livechat_auth_login_success"),e.next=27;break;case 19:throw e.prev=19,e.t0=e.catch(4),mr("livechat_auth_login_error"),s=e.t0,nt(s,"error signing in user with custom token"),E.identify.reject(),l({type:"AUTH_FAILED"}),s;case 27:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),[E.identify,I,t,m,l]),M=a(He(Pe.mark((function e(){var n,r,a,o;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E.logout.argument){e.next=3;break}return e.abrupt("return");case 3:return mr("livechat_auth_logout_base"),io.info("Start logging out user",{"is user ready":I}),e.next=7,Ma(t).logout();case 7:n=e.sent,r=n.uid,a=n.token,o=n.expirationTime,io.success("User logged out successfully"),m(r),w({token:a,expirationTime:o}),E.logout.resolve({newUid:r,newToken:a,newExpirationTime:o}),l({type:"AUTH_READY",data:{uid:r,token:a,expirationTime:o}}),mr("livechat_auth_logout_success"),e.next=26;break;case 19:throw e.prev=19,e.t0=e.catch(0),mr("livechat_auth_logout_error"),nt(e.t0,"error logging out user and signing in anon"),l({type:"AUTH_FAILED"}),E.logout.reject(),e.t0;case 26:case"end":return e.stop()}}),e,null,[[0,19]])}))),[I,l,E.logout,m,t]),B=a((function(e,t,n){io.info("updating user",{newUid:e,newToken:t,uid:p}),e!==p&&(m(e),w({token:t,expirationTime:n}))}),[p,m]);!function(e,t,n){var r=i(),a=i();o((function(){if(t){if(r.current&&r.current===t&&a.current)return;r.current&&r.current!==t&&(Ba.info("Token refresh cancel",{"new expirationTime":t,"old expirationTime":r.current}),clearTimeout(a.current),a.current=void 0),r.current=t;var o=function(){var t=He(Pe.mark((function t(){var o,i,s;return Pe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ma(e).refreshAuthToken();case 3:o=t.sent,i=o.token,s=o.expirationTime,n({token:i,expirationTime:s}),r.current=void 0,a.current=void 0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ba.error("Token refresh failed",{e:t.t0}),nt(t.t0,"failed to updateExpiredAuthToken");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),i=(new Date).toUTCString(),s=Math.abs(Date.parse(i)-Date.parse(t)+6e3);return Ba.info("Token refresh scheduled",{expirationTime:t,timeNow:i,timeTilExpiry:s}),a.current=se((function(){o()}),s),function(){a.current&&clearTimeout(a.current)}}}),[t,n,e])}(t,null==y?void 0:y.expirationTime,w);var O="AUTH_IDENTIFYING"===u.state?u.data.uidToLogin:"",L=i(0),R=i(u.state),D=t&&h&&e;return o((function(){var e=function(){var e=He(Pe.mark((function e(){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:io.info("Changed state",{currentState:I}),e.t0=I,e.next="AUTH_INITIAL"===e.t0?4:"AUTH_LOADING"===e.t0?7:"AUTH_LOGGING_OUT"===e.t0?9:"AUTH_IDENTIFYING"===e.t0?13:"AUTH_READY"===e.t0?17:"AUTH_ERROR_RETRY"===e.t0?29:"AUTH_ERROR"===e.t0?36:40;break;case 4:return mr("livechat_auth_initializing"),D&&l({type:"AUTH_INITIALIZE"}),e.abrupt("return");case 7:return C(),e.abrupt("return");case 9:return e.next=11,M();case 11:return k((function(){return so})),e.abrupt("return");case 13:return e.next=15,S(O);case 15:return k((function(){return so})),e.abrupt("return");case 17:if(io.info("entering AUTH_READY",{queue:E,uid:p}),tt({uid:p,widgetId:t}),!E.identify.argument){e.next=23;break}return mr("livechat_auth_ready_identify_queue"),l({type:"AUTH_IDENTIFY",data:{uidToLogin:E.identify.argument}}),e.abrupt("return");case 23:if(!E.logout.argument){e.next=27;break}return mr("livechat_auth_ready_identify_logout"),l({type:"AUTH_LOGOUT"}),e.abrupt("return");case 27:return mr("livechat_auth_ready"),e.abrupt("return");case 29:if(mr("livechat_auth_error_retry"),!(L.current<5)){e.next=33;break}return l({type:"AUTH_RESET"}),e.abrupt("return");case 33:return L.current=L.current+1,l({type:"AUTH_FAILED"}),e.abrupt("return");case 36:return mr("livechat_auth_full_error"),k((function(){return so})),Ye({type:"RELOAD_IFRAME_AFTER_ERROR"}),e.abrupt("return");case 40:return io.warn("entered unhandled invalid auth state",{currentState:I}),e.abrupt("return");case 42:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(R.current!==u.state||E.identify.argument||E.logout.argument||D)&&(R.current=u.state,e())}),[I,l,C,S,M,u.state,E,D,p,O,k,t]),{currentState:u.state,uid:"AUTH_READY"===u.state?p:void 0,authToken:"AUTH_READY"===u.state?null==y?void 0:y.token:void 0,isUserReady:"AUTH_READY"===u.state,updateUser:B,logout:x,loginVisitor:T}},uo={messages:[],agents:[],connectedAgent:void 0},lo=function(e){var t=e.shouldLoad,n=e.widgetId,a=e.isPreviewMode,i=co(!a&&t,n);return{store:function(e,t){var n=r(void 0),a=Ue(n,2),i=a[0],s=a[1];return o((function(){!function(){var n=He(Pe.mark((function n(){var r;return Pe.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(void 0!==i||!e||!t){n.next=7;break}return n.next=5,Ca(e);case 5:r=n.sent,s(r);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e,i,t]),{store:i}}(n,"AUTH_READY"===i.currentState&&!a).store,auth:i,state:uo}},Ao=m.Object.values,fo=function(e,t){var n,r;return e[t]||e[null===(n=t.split("-"))||void 0===n?void 0:n[0]]||(null===(r=Ao(e))||void 0===r?void 0:r[0])},po=z("Array").reverse,mo=Array.prototype,ho=function(e){var t=e.reverse;return e===mo||e instanceof Array&&t===mo.reverse?po:t},vo=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null==t||!t.length)return[];var n=Zt(t,(function(e){return"sending"===e.status&&"incoming"===e.direction}),30)||[];return ho(e=Se(n)).call(e)};function go(e){return e||(e=0),new Promise((function(t){return setTimeout(t,e)}))}function yo(){return Math.random().toString(36).substring(2)}var wo=0,_o=0;function Eo(){var e=(new Date).getTime();return e===wo?1e3*e+ ++_o:(wo=e,_o=0,1e3*e)}var bo="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var ko={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(e){return Promise.reject(e)}},canBeUsed:function(){if(bo&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:Eo},xo=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,To()),this.set.add(e),setTimeout((function(){!function(e){var t=To()-e.ttl,n=e.set[Symbol.iterator]();for(;;){var r=n.next().value;if(!r)return;if(!(e.timeMap.get(r)<t))return;e.timeMap.delete(r),e.set.delete(r)}}(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function To(){return(new Date).getTime()}function Io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var Co="messages";function So(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function Mo(e,t){var n=e.transaction(Co).objectStore(Co),r=[];return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(t+1,1/0);return n.openCursor(e)}catch(e){return n.openCursor()}}()).onsuccess=function(n){var a=n.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):e(r)}}))}function Bo(e,t){return function(e,t){var n=(new Date).getTime()-t,r=e.transaction(Co).objectStore(Co),a=[];return new Promise((function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var o=r.value;if(!(o.time<n))return void e(a);a.push(o),r.continue()}else e(a)}}))}(e,t).then((function(t){return Promise.all(t.map((function(t){return function(e,t){var n=e.transaction([Co],"readwrite").objectStore(Co).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}(e,t.id)})))}))}function Oo(e){e.closed||Lo(e).then((function(){return go(e.options.idb.fallbackInterval)})).then((function(){return Oo(e)}))}function Lo(e){return e.closed?Promise.resolve():e.messagesCallback?Mo(e.db,e.lastCursorId).then((function(t){return t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve()}var Ro={create:function(e,t){return t=Io(t),function(e){var t="pubkey.broadcast-channel-0-"+e,n=So().open(t,1);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(Co,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:yo(),eMIs:new xo(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Oo(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Lo(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},a=e.transaction([Co],"readwrite");return new Promise((function(e,t){a.oncomplete=function(){return e()},a.onerror=function(e){return t(e)},a.objectStore(Co).add(r)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&Bo(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!bo&&!!So()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:Eo};function Do(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function Fo(e){return"pubkey.broadcastChannel-"+e}function Uo(){if(bo)return!1;var e=Do();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var No={create:function(e,t){if(t=Io(t),!Uo())throw new Error("BroadcastChannel: localstorage cannot be used");var n=yo(),r=new xo(t.localstorage.removeTimeout),a={channelName:e,uuid:n,eMIs:r};return a.listener=function(e,t){var n=Fo(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,(function(e){a.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(r.add(e.token),a.messagesCallback(e.data)))})),a},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){go().then((function(){var r=Fo(e.channelName),a={token:yo(),time:(new Date).getTime(),data:t,uuid:e.uuid},o=JSON.stringify(a);Do().setItem(r,o);var i=document.createEvent("Event");i.initEvent("storage",!0,!0),i.key=r,i.newValue=o,window.dispatchEvent(i),n()}))}))},canBeUsed:Uo,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:Eo},Po=Eo,Qo=new Set;var Vo={create:function(e){var t={name:e,messagesCallback:null};return Qo.add(t),t},close:function(e){Qo.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(Qo).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Po},jo=[ko,Ro,No];if(bo){var Ho=require("../../src/methods/node.js");"function"==typeof Ho.canBeUsed&&jo.push(Ho)}var Wo=function(e,t){var n,r,a;this.name=e,this.options=Io(t),this.method=function(e){var t=[].concat(e.methods,jo).filter(Boolean);if(e.type){if("simulate"===e.type)return Vo;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||bo||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(jo.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,r=(n=this).method.create(n.name,n.options),(a=r)&&"function"==typeof a.then?(n._prepP=r,r.then((function(e){n._state=e}))):n._state=r};function zo(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:Promise.resolve()).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function Go(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function qo(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&Go(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function Yo(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!Go(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}Wo._pubkey=!0,Wo.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return zo(this,"message",e)},postInternal:function(e){return zo(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};Yo(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,qo(this,"message",t)):this._onML=null},addEventListener:function(e,t){qo(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){Yo(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var Ko=function(e,t){var n=i(null),r=i(!1),s=a((function(e){var t,r;null!==(t=n.current)&&void 0!==t&&t.isClosed||null===(r=n.current)||void 0===r||r.postMessage(e)}),[n]);return o((function(){if(e){var a=function(e){try{return new Wo("livechat-cross-tab-context:".concat(e))}catch(e){return null}}(e);return n.current=a,!r.current&&a&&(r.current=!0,a.onmessage=t),function(){r.current=!1,null==a||a.close()}}}),[e,t]),{broadcastMessage:s}},Zo=_,Jo=j,Xo=ge,$o=Ya,ei=m.Set;function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),We(e,r.key,r)}}var ni=function(e,t,n){return t&&ti(e.prototype,t),n&&ti(e,n),e},ri=function(){function e(t){Ra(this,e),this._entries=t}return ni(e,[{key:"getEntries",value:function(){return this._entries}},{key:"getEntriesByType",value:function(e){var t;return fe(t=this._entries).call(t,(function(t){return t.entryType===e}))}},{key:"getEntriesByName",value:function(e,t){var n,r;return fe(n=fe(r=this._entries).call(r,(function(t){return t.name===e}))).call(n,(function(e){return!t||e.entryType===t}))}}]),e}(),ai=["mark","measure","navigation","resource"],oi="Failed to execute 'observe' on 'PerformanceObserver': either an 'entryTypes' or 'type' member must be present.",ii="Failed to execute 'observe' on 'PerformanceObserver': either an 'entryTypes' or 'type' member must be present, not both.",si="Aborting 'observe' on 'PerformanceObserver': no valid entry types present in either 'entryTypes' or 'type' member.",ci="Invalid or unsupported entry types provided to 'observe' on 'PerformanceObserver'.",ui=function(e){return Xe(ai).call(ai,(function(t){return e===t}))},li=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.registeredObservers,r=void 0===n?new ei:n,a=t.processedEntries,o=void 0===a?new ei:a,i=t.interval,s=void 0===i?100:i,c=t.context,u=void 0===c?self:c;Ra(this,e),this.registeredObservers=r,this.processedEntries=o,this.interval=s,this.context=u,this.intervalId=null}return ni(e,[{key:"getNewEntries",value:function(){var e,t=this;return fe(e=this.context.performance.getEntries()).call(e,(function(e){return!t.processedEntries.has(e)}))}},{key:"getObserversForType",value:function(e,t){var n;return fe(n=Xo(e)).call(n,(function(e){var n;return Xe(n=e.entryTypes).call(n,(function(e){return e===t}))}))}},{key:"processBuffer",value:function(e){var t=Xo(e.buffer),n=new ri(t);e.buffer.clear(),t.length&&e.callback&&e.callback.call(void 0,n,e)}},{key:"processEntries",value:function(){var e,t=this;oe(e=this.getNewEntries()).call(e,(function(e){var n,r=e.entryType;oe(n=t.getObserversForType(t.registeredObservers,r)).call(n,(function(t){t.buffer.add(e)})),t.processedEntries.add(e)}));var n=function(){var e;return oe(e=t.registeredObservers).call(e,t.processBuffer)};"requestAnimationFrame"in this.context?this.context.requestAnimationFrame(n):this.context.setTimeout(n,0)}},{key:"add",value:function(e){this.registeredObservers.add(e),1===this.registeredObservers.size&&this.observe()}},{key:"remove",value:function(e){this.registeredObservers.delete(e),this.registeredObservers.size||this.disconnect()}},{key:"observe",value:function(){var e;this.intervalId=this.context.setInterval($o(e=this.processEntries).call(e,this),this.interval)}},{key:"disconnect",value:function(){this.intervalId=this.context.clearInterval(this.intervalId)}}]),e}()),Ai=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;Ra(this,e),this.entryTypes=[],this.callback=t,this.buffer=new ei,this.taskQueue=n}return ni(e,[{key:"observe",value:function(e){if(!e)throw new Error(oi);if(e.entryTypes&&e.type)throw new Error(ii);var t;if(e.entryTypes)t=e.entryTypes;else{if(!e.type)throw new Error(oi);t=[e.type]}var n=fe(t).call(t,ui);n.length>0&&n.length!==t.length&&console.warn(ci),n.length?(this.entryTypes=n,this.taskQueue.add(this)):console.warn(si)}},{key:"disconnect",value:function(){this.taskQueue.remove(this)}},{key:"takeRecords",value:function(){return Xo(this.buffer)}}]),e}();Ai.supportedEntryTypes=ai;var di,fi,pi,mi,hi="PerformanceObserver"in self&&"function"==typeof PerformanceObserver?PerformanceObserver:Ai,vi=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},gi=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},yi=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},wi=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},_i=function(e,t,n){var r;return function(a){t.value>=0&&(a||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},Ei=-1,bi=function(){return"hidden"===document.visibilityState?0:1/0},ki=function(){yi((function(e){var t=e.timeStamp;Ei=t}),!0)},xi=function(){return Ei<0&&(Ei=bi(),ki(),wi((function(){setTimeout((function(){Ei=bi(),ki()}),0)}))),{get firstHiddenTime(){return Ei}}},Ti={passive:!0,capture:!0},Ii=new Date,Ci=function(e,t){di||(di=t,fi=e,pi=new Date,Bi(removeEventListener),Si())},Si=function(){if(fi>=0&&fi<pi-Ii){var e={entryType:"first-input",name:di.type,target:di.target,cancelable:di.cancelable,startTime:di.timeStamp,processingStart:di.timeStamp+fi};mi.forEach((function(t){t(e)})),mi=[]}},Mi=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Ci(e,t),a()},r=function(){a()},a=function(){removeEventListener("pointerup",n,Ti),removeEventListener("pointercancel",r,Ti)};addEventListener("pointerup",n,Ti),addEventListener("pointercancel",r,Ti)}(t,e):Ci(t,e)}},Bi=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Mi,Ti)}))},Oi=new Set;function Li(e,t){var n;if(void 0===Jo||null==Zo(e)){if(er(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Ri(e,t);var r=ln(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Xo(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ri(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=Re(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Di(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=Di(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=Di(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var Ui=[500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],Ni=function(){return window.navigator.userAgent.match(/mobile/i)?"Mobile":window.navigator.userAgent.match(/iPad|Android|Touch/i)?"Tablet":"Desktop"},Pi=function(){var e,t;return null!==(e=null===(t=window.navigator.connection)||void 0===t?void 0:t.effectiveType)&&void 0!==e?e:"."},Qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";try{var t,n=window.performance.getEntriesByType("resource"),r=St(n).call(n,(function(e,t){var n=Math.round(null==t?void 0:t.decodedBodySize)/1e3;if("xmlhttprequest"===(null==t?void 0:t.initiatorType))return e;var r=t.name.split("?")[0].split("."),a=r[r.length-1];if("css"===a)return Fi(Fi({},e),{},{css:e.css+n});if("js"===a)return Fi(Fi({},e),{},{js:e.js+n});var o=e[a]||0;return Fi(Fi({},e),{},ze({},a,o+n))}),{js:0,css:0});oe(t=te(r)).call(t,(function(t){var n;r[t]&&pr({type:"gauge",method:"set",name:Oe(n="livechatwidget_resource_timings_".concat(t,"_")).call(n,e),value:Math.round(r[t])})}))}catch(e){}},Vi=function(e){return function(t){pr({type:"histogram",method:"observe",name:"livechatwidget_".concat(e),buckets:Ui,value:Math.round(t.value),labels:{connectionType:Pi(),deviceType:Ni()}})}};function ji(e,t){var n=te(e);if(Q){var r=Q(e);t&&(r=fe(r).call(r,(function(t){return N(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)oe(n=ji(Object(r),!0)).call(n,(function(t){ze(e,t,r[t])}));else if(F)R(e,F(r));else{var a;oe(a=ji(Object(r))).call(a,(function(t){O(e,t,N(r,t))}))}}return e}var Wi=rn("liveChatContext"),zi=e("g","STATIC:"),Gi="LOCAL_THREAD",qi={widgetId:"",selectedThread:Gi,config:void 0,windowConfig:void 0,threads:void 0,messages:ze({},Gi,[]),oldMessages:ze({},Gi,[]),connectedAgent:void 0,agents:void 0,isLoading:!0,isWaitingForReplyAfterButtons:!1},Yi=function(){},Ki=function(){var e=He(Pe.mark((function e(){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zi=d(Hi(Hi({},qi),{},{messages:[],isOpen:!1,currentRoute:Gn.Home,latestSeenMessage:void 0,toggleWidgetOpenState:Yi,sendMessage:Ki,sendFakeOutgoingMessage:Ki,sendEvent:Yi,setNewMessages:Yi,push:Yi,setDataConsent:Yi,setConnectChannelLink:Yi,newMessages:0,hasConsent:null,isPreviewMode:!1,connectChannelLink:"",parentInnerHeight:void 0,playedSoundLatestMessageId:void 0,messagePopups:[],setAllCurrentPopupsAsSeen:Yi,dismissPopup:Yi,setSelectedPopup:Yi,setSelectedPopupButton:Yi,authToken:void 0,uid:void 0,currentAttachments:[],updateMessageStatus:Ki,setCurrentAttachments:Yi,connectedAgent:void 0,quickReplyButtons:[],setQuickReplyButtons:Yi,setIsWaitingForReplyAfterButtons:Yi,isWaitingForReplyAfterButtons:!1,isMessageAlreadySent:!1,setIsMessageAlreadySent:Yi,fetchMoreMessages:Yi,widgetPosition:void 0,shouldFetchMore:!0,isUserSettingsModalOpen:!1,setIsUserSettingsModalOpen:Yi,hasNotificationSound:!1,setHasNotificationSound:Yi,changeLanguage:Yi,activeLanguage:"en"})),Ji=function(e){return e&&e!==Gi},Xi=e("u",(function(){return f(Zi)})),$i=function(e){var t,n,s,u,l,A,d,f,p,m,h,v,g,y,w,_,E=e.children,b=r(qi),k=Ue(b,2),x=k[0],T=k[1],I=r(void 0),C=Ue(I,2),S=C[0],M=C[1],B=r({widgetUrl:"",screenSize:[]}),O=Ue(B,2),L=O[0],R=O[1],D=rr(),F=D.initialize,U=D.track,N=r(void 0),P=Ue(N,2),Q=P[0],V=P[1],j=r(void 0),H=Ue(j,2),z=H[0],G=H[1],q=r("/"),Y=Ue(q,2),K=Y[0],J=Y[1],X=r(!1),ee=Ue(X,2),ne=ee[0],re=ee[1],ae=r(void 0),ie=Ue(ae,2),ce=ie[0],ue=ie[1],Ae=x.selectedThread,de=x.widgetId,pe=dt("route",Gn.Home,de),me=pe.storageState,he=pe.setStorageState,ve=r(0),ge=Ue(ve,2),ye=ge[0],we=ge[1],_e=r(!1),Ee=Ue(_e,2),be=Ee[0],ke=Ee[1],xe=dt("lastMessageSeenTimeStamp",void 0,de),Te=xe.storageState,Ie=xe.setStorageState,Ce=dt("failedMessagesQueue",[],de),Me=Ce.storageState,Be=Ce.setStorageState,Le=r(!1),Re=Ue(Le,2),De=Re[0],Fe=Re[1],Ne=dt("hasWidgetBeenOpened",!1,de),Qe=Ne.storageState,Ve=Ne.setStorageState,je=dt("hasWidgetApiBeenCalled",!1,de),We=je.storageState,Ke=je.setStorageState,Ze=dt("isNativeApp",!1,de),Je=Ze.storageState,Xe=Ze.setStorageState,et=dt("notificationSound",null,de),tt=et.storageState,rt=et.setStorageState,at=dt("userLang",(null==x||null===(t=x.config)||void 0===t?void 0:t.defaultLanguage)||"en",de),ct=at.storageState,lt=at.setStorageState,pt=dt("hasConsent",null,At),mt=pt.storageState,ht=pt.setStorageState,vt=r({}),yt=Ue(vt,2),wt=yt[0],_t=yt[1],Et=r(""),bt=Ue(Et,2),kt=bt[0],xt=bt[1],It=r([]),Ct=Ue(It,2),St=Ct[0],Mt=Ct[1],Bt=r([]),Ot=Ue(Bt,2),Lt=Ot[0],Rt=Ot[1],Dt=i(!1),Ft=i(!1),Ut=i(void 0),Nt=i(null),Pt=i(void 0),Qt=a((function(){var e,t,n;null===(e=Ut.current)||void 0===e||e.call(Ut),Ut.current=void 0,null===(t=Pt.current)||void 0===t||t.call(Pt),Pt.current=void 0,null===(n=Nt.current)||void 0===n||n.call(Nt),Nt.current=void 0,Dt.current=!1,Ft.current=!1}),[]),Vt=null===(n=x.windowConfig)||void 0===n?void 0:n.previewMode,jt=lo({shouldLoad:Qe||Je||We,widgetId:de,isPreviewMode:Vt}),Ht=jt.auth,Wt=jt.store,zt=Ht.uid,Gt=Ht.authToken,Yt=Ht.isUserReady,Zt=Ht.updateUser,$t=Ht.logout,en=Ht.loginVisitor,tn=a(function(){var e=He(Pe.mark((function e(t){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==Wt?void 0:Wt.updateMessageStatus(zt,Ae,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Wt,zt,Ae]),nn=function(e){var t=r(!1),n=Ue(t,2),o=n[0],i=n[1],s=r([]),c=Ue(s,2),u=c[0],l=c[1];return{handleButtonsFlow:a((function(e){var t,n,r,a,o,s,c,u=e[e.length-1],A=Jt(e,(function(e){return"outgoing"===e.direction})),d="incoming"===(null==u?void 0:u.direction),f=!(null!=A&&A.metadata&&"conversationBridging"in(null==A||null===(t=A.metadata)||void 0===t?void 0:t.source));null!=A&&null!==(n=A.payload)&&void 0!==n&&n.buttons||i(!1),d&&f&&(null==A||null===(r=A.payload)||void 0===r||null===(a=r.buttons)||void 0===a?void 0:a.length)>0&&se((function(){return i(!0)})),null!=u&&null!==(o=u.payload)&&void 0!==o&&o.buttons&&!u.event&&f&&(i(!1),l(null===(s=e[e.length-1])||void 0===s||null===(c=s.payload)||void 0===c?void 0:c.buttons))}),[]),quickReplyButtons:u,setQuickReplyButtons:l,isWaitingForReplyAfterButtons:o,setIsWaitingForReplyAfterButtons:i}}(x.messages[Ae]),rn=nn.handleButtonsFlow,an=nn.setQuickReplyButtons,on=nn.quickReplyButtons,sn=nn.isWaitingForReplyAfterButtons,cn=nn.setIsWaitingForReplyAfterButtons,un=a((function(){T((function(e){return Hi(Hi({},e),{},{selectedThread:qi.selectedThread,messages:qi.messages,threads:qi.threads})})),he(Gn.Home),ma("RESET_USER_STATE",de,zt,{}),_t({}),we(0),M(void 0),ue(void 0),an([]),Rt([]),Be([])}),[he,Be,an,de,zt]),ln=i(!1);o((function(){!Yt&&ln.current&&(Qt(),un()),ln.current=Yt}),[Yt,un,Qt]);var An=a(function(){var e=He(Pe.mark((function e(t,n){var r,a,o,i,s,c,u,l=arguments;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:{},e.prev=1,Ji(Ae)){e.next=10;break}if(Wi.warn("User does not have a selected thread",{"user id":zt}),!Xt(x.messages[Ae],t)){e.next=7;break}return ke(!0),e.abrupt("return");case 7:return T((function(e){var n,r,a=Oe(n=Se(e.messages[Ae])).call(n,{id:Oe(r="".concat(zi)).call(r,t),from:"",createdAt:new Date,payload:{text:t},direction:"incoming",status:"sending",type:"text"});return Hi(Hi({},e),{},{messages:Hi(Hi({},e.messages),{},ze({},Ae,a))})})),Be((function(e){return fe(e).call(e,(function(e){return e.payload.text!==t}))})),e.abrupt("return");case 10:if(c=null!==(a=x.messages.LOCAL_THREAD)&&void 0!==a&&a.length?x.messages.LOCAL_THREAD:[],u=null!==(o=x.messages[Ae])&&void 0!==o&&o.length?x.messages[Ae]:[],r.shouldByPassSameMessageCheck||!Xt(Oe(i=[]).call(i,Se(u),Se(c)),t)){e.next=15;break}return ke(!0),e.abrupt("return");case 15:return T((function(e){var r,a;return Hi(Hi({},e),{},{messages:Hi(Hi({},e.messages),{},ze({},Ae,Oe(r=Se(null!==(a=e.messages[Ae])&&void 0!==a?a:[])).call(r,{id:t,from:"",createdAt:new Date,payload:{text:t},direction:"incoming",status:"sending",event:n})))})})),e.next=18,null==Wt||null===(s=Wt.sendMessage)||void 0===s?void 0:s.call(Wt,zt,Ae,t,Hi(Hi({},L),{},{attributes:wt}),n,Lt);case 18:Be((function(e){return fe(e).call(e,(function(e){return e.payload.text!==t}))})),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),nt(e.t0,!t&&n?"failed_sending_event":"failed_sending_user_message"),U("livechat_failed_message"),Be((function(e){var r;return Oe(e).call(e,{id:Oe(r="".concat(zi)).call(r,t),from:"",createdAt:new Date,payload:{text:t},direction:"incoming",status:"failed",event:n})}));case 26:Rt([]);case 27:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,n){return e.apply(this,arguments)}}(),[zt,Wt,Ae,L,wt,Lt,x]),dn=r(void 0),fn=Ue(dn,2),pn=fn[0],mn=fn[1];o((function(){x.windowConfig&&!x.windowConfig.disableAnalytics&&F()}),[x,F]),o((function(){zt&&Ye({type:"RETURN_VISITOR_ID",id:zt})}),[zt]),o((function(){Vt&&x.isLoading&&T((function(e){return Hi(Hi({},e),{},{isLoading:!1})}))}),[Vt,x]),o((function(){var e,t;if(S){var n,r=le(e=x.config.popups).call(e,(function(e){return e.id===S})),a={id:"".concat(zi,"popupText"),from:"",createdAt:new Date,payload:{text:fo(r.templates,null==x||null===(t=x.config)||void 0===t?void 0:t.defaultLanguage)},direction:"outgoing",metadata:{source:{popupId:r.id}},status:"received",type:"text"};if(Yt&&Wt&&Ji(Ae))return T((function(e){var t,n;return Hi(Hi({},e),{},{messages:ze({},Ae,Oe(t=Se(null!==(n=e.messages[Ae])&&void 0!==n?n:[])).call(t,a))})})),void Dn({type:"PopupClicked",language:null==x||null===(n=x.config)||void 0===n?void 0:n.defaultLanguage,popupID:S})}}),[zt,S,Ae,ce]),o((function(){if(ce&&S&&null!=x&&x.messages[Ae]){var e,t,n,r=null==x?void 0:x.messages[Ae][(null==x?void 0:x.messages[Ae].length)-1];(null!=r&&r.metadata&&"source"in(null==r?void 0:r.metadata)&&"popupId"in(null===(e=r.metadata)||void 0===e?void 0:e.source)?null==r||null===(t=r.metadata)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.popupId:void 0)===S&&(An(ce),M(void 0),ue(void 0))}}),[ce,S,x.messages,Ae,An]);var hn=a((function(e){ht(e),Yt&&Wt&&null===mt&&Wt.setUserAcceptedTerms(zt,e)}),[ht,Yt,Wt,mt,zt]),vn=null==x||null===(s=x.config)||void 0===s?void 0:s.supportedLanguages,gn=null==x||null===(u=x.config)||void 0===u?void 0:u.defaultLanguage;qt(gn,ct,vn,Vt,de);var yn=a((function(e){lt(e),Kt(e,gn,vn,de)}),[gn,vn,de,lt]),wn=a((function(e){switch(Wi.info("Received a message from another tab via broadcastChannel",{"message content":e}),e.type){case"IDENTIFY_BEGIN":case"LOGOUT_BEGIN":return Qt(),void Wi.info("Cancelled Firestore subscriptions.");case"LOGOUT_COMPLETE":return un(),Zt(e.newUid,e.newToken,e.newExpirationTime),void Wi.info("Using new user id sent by another tab",{"new user id":e.newUid});case"IDENTIFY_COMPLETE":return un(),Zt(e.newUid,e.newToken,e.newExpirationTime),e.attributes&&_t(e.attributes),void Wi.info("Using new user id sent by another tab",{"new user id":e.newUid});case"NEW_ATTRIBUTES":return ma("NEW_ATTRIBUTES_FROM_DIFFERENT_TAB",de,zt,e.attributes),void _t(e.attributes);default:return}}),[Zt,un,Qt,zt,de]),_n=Ko(de,wn).broadcastMessage;!function(e){var t=r(null),n=Ue(t,2),i=n[0],s=n[1],c=a((function(t){"SET_WIDGET_ID"!==t.data.type?e(t.data):s(t.data.payload.widgetId)}),[e]);o((function(){i&&Ye({type:"IFRAME_READY_WITH_WIDGET_ID",widgetId:i})}),[i]),o((function(){return window.addEventListener("message",c),Ye({type:"IFRAME_READY"}),function(){window.removeEventListener("message",c)}}),[c])}(a(function(){var e=He(Pe.mark((function e(t){var n,r,a,o,i,s,c,u,l,A,d,f,p,m,h,v,g,y,w,_,E,b;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:e.t0=t.type,e.next="IFRAME_LOADED"===e.t0?5:"INITIALIZE"===e.t0?11:"UPDATE_CONFIG"===e.t0?14:"SET_LANGUAGE"===e.t0?16:"TOGGLE_CHAT"===e.t0?18:"SET_ATTRIBUTES"===e.t0?19:"IDENTIFY_VISITOR"===e.t0?22:"CHANGE_VIEW"===e.t0?53:"URL_CHANGED"===e.t0?58:"WIDGET_LOADED_METRIC"===e.t0?61:"START_CONVERSATION"===e.t0?63:"LOGOUT_LIVECHAT"===e.t0?65:67;break;case 5:return n=t.payload,r=n.metadata,a=n.windowConfig,o=n.parentInnerHeight,i=n.widgetPosition,s=n.isNativeMode,R((function(e){return Hi(Hi({},e),r)})),V(o),s&&Xe(!0),i&&(G(i),Wi.info("setting widget position",{"widget position":i})),e.abrupt("return",T((function(e){return Hi(Hi({},e),{},{config:Hi(Hi({},a),e.config),widgetId:null==a?void 0:a.widgetId,windowConfig:a})})));case 11:return mt&&F(),he(Gn.Home),e.abrupt("return",T((function(e){return Hi(Hi({},e),{},{widgetId:t.payload.widgetId||e.widgetId,config:Hi(Hi(Hi(Hi({},e.config),t.payload.config),t.payload.windowConfig),ar(t.payload.widgetId||e.widgetId)),windowConfig:Hi(Hi({},e.windowConfig),t.payload.windowConfig)})})));case 14:return null!=t&&null!==(c=t.payload)&&void 0!==c&&null!==(u=c.config)&&void 0!==u&&u.popups&&(m=(null===(l=t.payload.config.popups)||void 0===l||null===(A=l[0])||void 0===A||null===(d=A.templates)||void 0===d?void 0:d.en)||(null===(f=t.payload.config.popups)||void 0===f||null===(p=f[0])||void 0===p?void 0:p.buttonsEnabled),Mt(m?t.payload.config.popups:[])),e.abrupt("return",T((function(e){return Hi(Hi({},e),{},{config:Hi(Hi({},e.config),t.payload.config)})})));case 16:return yn(t.payload.language),e.abrupt("return");case 18:return e.abrupt("return",Fe(t.payload));case 19:return ma("SET_ATTRIBUTES_CALL",de,zt,t.payload),_n({type:"NEW_ATTRIBUTES",attributes:t.payload}),e.abrupt("return",_t(t.payload));case 22:if(h=t.payload.id,e.prev=23,Ke(!0),t.payload.attributes&&(ma("IDENTIFY_VISITOR_CALL",de,zt,t.payload.attributes),_t(t.payload.attributes),_n({type:"NEW_ATTRIBUTES",attributes:t.payload.attributes})),h!==zt){e.next=29;break}return Ye({type:"LOGIN_COMPLETE"}),e.abrupt("return",void 0);case 29:return mr("livechatwidget_identify_base",{widgetId:de,uid:zt}),_n({type:"IDENTIFY_BEGIN"}),Qt(),Wi.info("Start identifying user...",{"to be identified":h}),e.next=35,en(h);case 35:v=e.sent,g=v.newUid,y=v.newToken,w=v.newExpirationTime,Wi.success("Successfully identified user",{identified:h}),_n({type:"IDENTIFY_COMPLETE",newUid:g,newToken:y,newExpirationTime:w,attributes:t.payload.attributes}),t.payload.attributes&&(ma("IDENTIFY_VISITOR_CALL_AFTER_AUTH",de,zt,t.payload.attributes),_t(t.payload.attributes),_n({type:"NEW_ATTRIBUTES",attributes:t.payload.attributes})),Ye({type:"LOGIN_COMPLETE"}),mr("livechatwidget_identify_success",{widgetId:de,toBeIdentifiedId:h}),e.next=52;break;case 46:e.prev=46,e.t1=e.catch(23),E=e.t1,mr(E instanceof eo?"livechatwidget_identify_known_error":"livechatwidget_identify_error",{widgetId:de,toBeIdentifiedId:h}),nt(E,"error identifying user"),Ye({type:"LOGIN_COMPLETE",error:null!==(_=null==E?void 0:E.message)&&void 0!==_?_:"failed"});case 52:return e.abrupt("break",67);case 53:if(Gn.Chat!==t.payload.view&&Gn.Home!==t.payload.view){e.next=57;break}return e.abrupt("return",he(t.payload.view));case 57:return e.abrupt("break",67);case 58:return b=t.payload.url,J(b),e.abrupt("break",67);case 61:return k=t.payload,pr({type:"histogram",method:"observe",name:"livechatwidget_widget_bootstrap_rendered_perf",value:Math.round(k),buckets:Ui,labels:{connectionType:Pi(),deviceType:Ni()}}),e.abrupt("break",67);case 63:return An(t.payload.text),e.abrupt("break",67);case 65:try{Ke(!0),de&&(Qt(),_n({type:"LOGOUT_BEGIN"}),ut(de),se(He(Pe.mark((function e(){var t,n,r,a;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t();case 2:t=e.sent,n=t.newUid,r=t.newToken,a=t.newExpirationTime,Ye({type:"LOGOUT_COMPLETE"}),_n({type:"LOGOUT_COMPLETE",newUid:n,newToken:r,newExpirationTime:a});case 8:case"end":return e.stop()}}),e)})))))}catch(e){Ye({type:"LOGOUT_COMPLETE"})}return e.abrupt("break",67);case 67:case"end":return e.stop()}var k}),e,null,[[23,46]])})));return function(t){return e.apply(this,arguments)}}(),[Xe,_n,mt,F,en,$t,he,An,zt,de,Qt,_t,Mt,T,R,Fe,yn,Ke])),o((function(){!function(){if(de&&zt&&!Ji(Ae)){var e,t,n=(e="messages",fe(t=te($e)).call(t,(function(t){return Z(t).call(t,e)})));oe(n).call(n,(function(e){it(e)}))}}()}),[de,zt,Ae,T]);var En=i(null),bn=i(0),kn=a(function(){var e=He(Pe.mark((function e(t,n){var r,a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,mr("livechat_storage_thread_creation_base"),Wi.info("Attached getThreads subscriber..."),a=Oe(r="thread:".concat(n,":")).call(r,t),En.current||(En.current=se(He(Pe.mark((function e(){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt(n,Gt);case 2:case"end":return e.stop()}}),e)}))),1500)),e.next=7,Wt.getThreads(t,Pt);case 7:if(o=e.sent,!(i=te(o)[0])){e.next=16;break}clearTimeout(En.current),ot(a,o),En.current=null,T((function(e){return e.selectedThread!==i&&Wi.success("Retrieved user threads from Firestore...",{"current thread id":i}),mr("livechat_storage_thread_creation_success"),Hi(Hi({},e),{},{threads:o,selectedThread:i})})),e.next=20;break;case 16:if(!(bn.current<5)){e.next=20;break}return bn.current++,e.next=20,kn(t,n);case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),mr("livechat_storage_thread_creation_error"),Wi.error("Failed to create or get threads from FireStore!",e.t0),nt(e.t0,"thread get or creation failure");case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}(),[Wt,T,Gt]),xn=!0===(null==x||null===(l=x.config)||void 0===l?void 0:l.hideConsentMessage);o((function(){function e(){return(e=He(Pe.mark((function e(){var t;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt.getUserDetails(zt);case 3:if(t=e.sent,Wi.info("Getting user data from Firestore",{"user data":t}),null!=t&&t.createdAt){e.next=9;break}return Wi.info("No user found, creating user in Firestore",{"user data":t}),e.next=9,Wt.createUser(zt);case 9:return xn?(hn(!1),T((function(e){return Hi(Hi({},e),{},{hasConsent:!1})}))):null!=t&&t.createdAt&&null!==(null==t?void 0:t.acceptedTermsAndConditions)&&null===mt&&(Wi.info("Updating user consent status...",{"current consent status":mt,"consent status from Firestore":t.acceptedTermsAndConditions}),ht(t.acceptedTermsAndConditions)),e.next=12,kn(zt,de);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Wi.error("Failed to create a thread via MAPI!",e.t0),nt(e.t0,"failed_creating_user_thread");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!Ji(Ae)&&Yt&&Wt&&function(){e.apply(this,arguments)}()}),[hn,xn,de,kn,Ae,Wt,zt,ht,Yt,mt,Gt]);var Tn=a((function(e){var t;if(!Te&&e.length){var n=Jt(e,(function(e){return"read"===e.status&&"outgoing"===e.direction}));Ie(null==n||null===(t=n.createdAt)||void 0===t?void 0:t.toString())}}),[Te,Ie]),In=a((function(e){rn(e),T((function(t){return Hi(Hi({},t),{},{messages:Hi(Hi({},t.messages),{},ze({},Ae,e))})})),x.isLoading&&se((function(){T((function(e){return Hi(Hi({},e),{},{isLoading:!1})}))}),10)}),[rn,T,x,Ae]),Cn=i(Vt||!1),Sn=a((function(e,t){Cn.current=t,T((function(t){var n;return Hi(Hi({},t),{},{oldMessages:ze({},Ae,Oe(n=[]).call(n,Se(e),Se(t.oldMessages[Ae]||[])))})}))}),[T,Ae]),Mn=a(He(Pe.mark((function e(){var t,n,r;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cn.current&&Wt&&Yt){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null==Wt?void 0:Wt.fetchMoreMessages(zt,Ae);case 4:t=e.sent,n=t.messages,r=t.shouldNotFetchMore,Sn(n,r);case 8:case"end":return e.stop()}}),e)}))),[Wt,Ae,Sn,zt,Yt]);o((function(){var e=function(){var e=He(Pe.mark((function e(){var t;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vt&&(Cn.current=!0),!Ft.current&&Wt&&Yt&&!Vt&&!Dt.current&&!Nt.current&&Ji(Ae)){e.next=3;break}return e.abrupt("return");case 3:return Ft.current=!0,e.next=6,Wt.getInitialMessages(zt,Ae,Nt);case 6:t=e.sent,rn(t),T((function(e){return Hi(Hi({},e),{},{oldMessages:ze({},Ae,t)})})),Tn(t),Dt.current=!0;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=He(Pe.mark((function e(){return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ji(Ae)&&!Vt&&Wt&&Yt&&!Ut.current&&Dt.current&&Wt.subscribeToMessagesMessages(zt,Ae,In,Ut);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[In,Yt,Ae,x.messages,Wt,zt,de,Vt,x,rn,Tn]);var Bn=a(function(){var e=He(Pe.mark((function e(t){var n;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==Wt?void 0:Wt.getConnectedAgent(t);case 2:n=e.sent,T((function(e){return Hi(Hi({},e),{},{connectedAgent:n})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Wt]);o((function(){var e,t=null!==(e=Ae&&(null==x?void 0:x.threads)&&x.threads[Ae].connectedTo)&&void 0!==e?e:void 0;zt&&t&&!x.connectedAgent&&Bn(t)}),[Ae,x,Wt,zt,Bn]);var On=null==x||null===(A=x.config)||void 0===A?void 0:A.showAgents;o((function(){var e=function(){var e=He(Pe.mark((function e(){var t;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wi.info("Started fetching agents from FireStore"),e.prev=1,e.next=4,Wt.getAgents();case 4:t=e.sent,T((function(e){return Hi(Hi({},e),{},{agents:t})})),Wi.success("Fetched agents from FireStore successfully",{"current agents":t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Wi.error("Failed to fetch agents from FireStore!",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();Wt&&On&&void 0===x.agents&&Yt&&e()}),[zt,On,x.agents,Wt,Yt]);var Ln=null===(d=x.messages)||void 0===d||null===(f=d[Ae])||void 0===f?void 0:f.length;o((function(){if(Ln>0){var e=qe(x.messages[Ae]),t=new Date(null==e?void 0:e.createdAt).toString(),n=new Date(Te).toString();if(void 0!==Te&&n===t)we(0);else{var r,a,o=function(e){return fe(e).call(e,(function(e){return Ge(e)}))}(x.messages[Ae]),i=fe(r=fe(a=$(o).call(o,(function(e){return Hi(Hi({},e),{},{createdAt:new Date(e.createdAt)})}))).call(a,(function(e){return!Te||e.createdAt>=new Date(Te)}))).call(r,(function(e){var t;return(null===(t=e.createdAt)||void 0===t?void 0:t.toString())!==Te}));we(i.length);var s=x.messages[Ae],c=s&&s.length?s[s.length-1]:void 0;c&&mn(c.id)}}}),[Te,Ln,Ae,x.messages]),o((function(){Ye(ye?{type:"SET_DOCUMENT_TITLE",title:"(".concat(ye,") New Message(s)!")}:{type:"SET_DOCUMENT_TITLE",title:void 0})}),[ye]),o((function(){De&&Ve(!0)}),[De,Ve]);var Rn=me;o((function(){"undefined"!==Rn&&void 0!==Rn||(nt("Route not found, redirecting to home"),he(Gn.Home))}),[Rn,he]);var Dn=a((function(e){var t=navigator.language.split("-"),n=Ue(t,1)[0],r=Z(gt).call(gt,n)?n:gn;"PopupClicked"===e.type&&(r=gn),An("",Hi(Hi({},e),{},{language:"ConversationBridgingOTPStart"===e.type||"PopupClicked"===e.type?r:"undefined"}))}),[gn,An]);o((function(){(function(){var e=He(Pe.mark((function e(){var t,n,r,a,o,i;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=x.messages.LOCAL_THREAD)||void 0===t||!t.length||x.isLoading||!Ji(Ae)){e.next=15;break}n=vo(x.messages.LOCAL_THREAD),T((function(e){return Hi(Hi({},e),{},{messages:Hi(Hi({},e.messages),{},ze({},Gi,[]))})})),Wi.info("".concat(n.length," messages to be sent")),r=0;case 5:if(!(r<n.length)){e.next=15;break}return a=n[r],Wi.info("sending queued message",{message:a}),o=a.payload.text,i=a.event,e.next=12,An(o,i,{shouldByPassSameMessageCheck:!0});case 12:r++,e.next=5;break;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[Ae,An,x]);var Fn=a(function(){var e=He(Pe.mark((function e(t){var n;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==Wt||null===(n=Wt.sendFakeOutgoingMessage)||void 0===n?void 0:n.call(Wt,zt,Ae,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Wt,Ae,zt]),Un=null==x||null===(p=x.config)||void 0===p?void 0:p.popups,Nn=a((function(){var e=K;if(de&&(null==Un?void 0:Un.length)>0){var t=fe(Un).call(Un,(function(t){if(!t.enabled)return!1;if(st("hasSeenMessagePopup:".concat(t.id))&&"showOnce"===t.showSetting)return!1;if(null===t.conditions||void 0===W(t.conditions))return!0;var n,r=!1;t.conditions&&oe(n=t.conditions).call(n,(function(t){"show"===t.display&&"exact"===t.match&&t.text===e&&(r=!0),"show"===t.display&&"contains"===t.match&&Z(e).call(e,t.text)&&(r=!0),"hide"===t.display&&"exact"===t.match&&t.text===e&&(r=!1),"hide"===t.display&&"contains"===t.match&&Z(e).call(e,t.text)&&(r=!1)}));return r}));Mt(t)}}),[Un,K,de]);o((function(){Nn&&Nn()}),[K]);!function(e){o((function(){if(e)for(var t in ft){var n=ft[t];e[n]&&document.documentElement.style.setProperty(t,e[n])}}),[e])}(null===(m=x.config)||void 0===m?void 0:m.styles);var Pn,Qn,Vn=!!Vt||!!de,jn=Oe(h=[]).call(h,Se(null!==(v=null===(g=x.oldMessages)||void 0===g?void 0:g[Ae])&&void 0!==v?v:[]),Se(null!==(y=null===(w=x.messages)||void 0===w?void 0:w[Ae])&&void 0!==y?y:[]),Se(Me));return c.createElement(Zi.Provider,{value:Hi(Hi({},x),{},{isLoading:!Yt&&!Vt,isOpen:De,playedSoundLatestMessageId:pn,push:he,currentRoute:me,toggleWidgetOpenState:function(e){Fe((function(t){!1===t&&function(e){var t="widgetLoadCount:".concat(e),n=st(t);ot(t,n?n+1:1)}(de);var n=void 0===e?!t:e;return Ye({type:"TOGGLE",isOpen:n}),n}))},messages:Vt?(Pn=null==x||null===(_=x.config)||void 0===_?void 0:_.availableChannels,null!=Pn&&Pn.length?[ua[1],{id:"3",payload:{text:"",buttons:$(Qn=fe(Pn).call(Pn,(function(e){return"DISABLED"!==e.bridging&&Z(ca).call(ca,e.platform)}))).call(Qn,(function(e){var t;return{id:Oe(t="".concat(e.platform,":")).call(t,e.platformIdentifier),url:"https://messagebird.com",text:e.platform,value:e.platformIdentifier}}))},type:"text",from:"",direction:"outgoing",status:"sent",createdAt:new Date,metadata:{source:{conversationBridging:{code:"123456789"}}}}]:ua):jn,isPreviewMode:Vt,sendMessage:An,sendEvent:Dn,sendFakeOutgoingMessage:Fn,newMessages:ye,latestSeenMessage:Te,setLatestSeenMessage:Ie,setDataConsent:hn,hasConsent:mt,connectChannelLink:kt,setConnectChannelLink:xt,parentInnerHeight:Q,messagePopups:St,setAllCurrentPopupsAsSeen:function(){(null==St?void 0:St.length)>0&&oe(St).call(St,(function(e){e.showSetting&&"showOnce"!==e.showSetting||ot("hasSeenMessagePopup:".concat(e.id),!0)})),Mt([])},dismissPopup:function(e){var t=fe(St).call(St,(function(t){return t.id!==e}));Mt(t),ot("hasSeenMessagePopup:".concat(e),!0)},setSelectedPopup:M,setSelectedPopupButton:ue,authToken:Gt,uid:zt,updateMessageStatus:tn,currentAttachments:Lt,setCurrentAttachments:Rt,quickReplyButtons:on,setQuickReplyButtons:an,isWaitingForReplyAfterButtons:sn,setIsWaitingForReplyAfterButtons:cn,isMessageAlreadySent:be,widgetPosition:z,setIsMessageAlreadySent:ke,fetchMoreMessages:Mn,shouldFetchMore:Cn.current,isUserSettingsModalOpen:ne,setIsUserSettingsModalOpen:re,hasNotificationSound:tt,setHasNotificationSound:rt,changeLanguage:yn,activeLanguage:ct})},Vn?E:null)},es=new(0,m.URLSearchParams)(window.location.search).get("disableAudio"),ts=e("a1",(function(e,t){var n=s((function(){try{return es?void 0:new Audio(e)}catch(e){return void nt(e,"error initializing audio")}}),[e]),a=r(!1),i=Ue(a,2),c=i[0],u=i[1],l=function(){u(!1)};return o((function(){!es&&t&&(null==n||n.addEventListener("ended",l))}),[n,t]),[c,function(){var e=He(Pe.mark((function e(){var r;return Pe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u(!0),!es&&t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==n?void 0:n.play();case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),"NotAllowedError"!==(r=e.t0).name&&"NotSupportedError"!==r.name){e.next=13;break}return e.abrupt("return");case 13:nt(r);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()]})),ns=e("I",(function(e){var t=i();return o((function(){t.current=e}),[e]),t.current})),rs=e("a2","data:audio/ogg;base64,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"),as="styles_wrapper__2J-67",os="styles_whiteFallback__1kfpl",is="styles_messagesAmount__2YJTd",ss=[.2126,.7152,.0722],cs=e("A",(function(e){try{var t=function(e){var t;return $(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return"#"+t+t+n+n+r+r})).substring(1).match(/.{2}/g)).call(t,(function(e){return Ke(e,16)}))}(e);return St(t).call(t,(function(e,t,n){var r=t*ss[n];return void 0!==e?r+e:r}),void 0)>235}catch(e){return!1}})),us=32,ls=32,As=function(e){var t,n,r,a=e.icon,i=e.isOpen,s=e.messagesAmount,u=e.onClick,l=Xi(),A=l.isPreviewMode,d=l.config,f=l.hasNotificationSound,m=ns(s),h=ts(rs,f),v=Ue(h,2),g=v[0],y=v[1];o((function(){!i&&void 0!==s&&s>0&&void 0!==m&&s!==m&&!g&&!A&&y()}),[s,m,g,y,i,A]),p((function(){Ye({type:"IFRAME_CONTENT_RENDERED"})}),[]),o((function(){i&&Qi("lazy")}),[i]);var w=cs(null==d||null===(t=d.styles)||void 0===t?void 0:t.mainColor),_=cs(null==d||null===(n=d.styles)||void 0===n?void 0:n.secondaryColor);return!0===(null==d?void 0:d.hideOCWButton)?null:c.createElement("div",{"data-testid":"start-button",className:Oe(r="".concat(as," ")).call(r,w?os:""),onClick:u,onKeyPress:u,role:"button",tabIndex:0},void 0!==s&&s>0&&c.createElement("div",{"data-testid":"unread-messages-notification",className:is},s),i?c.createElement(Kn,{color:_&&w?"#0089ff":"#ffffff",width:us,height:ls}):c.createElement(ds,{icon:a}))},ds=function(e){var t=e.icon;return t?c.createElement("img",{src:t,style:{maxWidth:"48px",maxHeight:"48px",marginTop:"-3px"},alt:"Chat Widget Button",loading:"lazy"}):c.createElement(Xn,{color:"#ffffff",width:us,height:ls})},fs="styles_wrapper__d7uG7",ps="styles_wrapperLeft__2aFSa",ms=e("ab",{widget:"styles_widget__2g5UX",widgetLeft:"styles_widgetLeft__18pbC",opened:"styles_opened__3NvNz","slide-up":"styles_slide-up__1ZeLY",withPopups:"styles_withPopups__3LhvR",noScroll:"styles_noScroll__2VQlC",closedWithPops:"styles_closedWithPops__n-1T2",closedWithOutPops:"styles_closedWithOutPops__2iD63",closed:"styles_closed__2WIQl","slide-down":"styles_slide-down__17voM",widgetBody:"styles_widgetBody__2PS3E",withConversations:"styles_withConversations__3U-zm",widgetContainer:"styles_widgetContainer__1GpQ0",widgetWrapper:"styles_widgetWrapper__1LyF3",homeWrapper:"styles_homeWrapper__3VIPb",homeWrapperReversed:"styles_homeWrapperReversed__fyKB1",footer:"styles_footer__1DjbU"}),hs=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),vs="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,gs="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),ys="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(gs):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var ws=["top","right","bottom","left","width","height","size","weight"],_s="undefined"!=typeof MutationObserver,Es=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function o(){n&&(n=!1,e()),r&&s()}function i(){ys(o)}function s(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(i,t);a=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){vs&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),_s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){vs&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;ws.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),bs=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},ks=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||gs},xs=Bs(0,0,0,0);function Ts(e){return parseFloat(e)||0}function Is(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Ts(e["border-"+n+"-width"])}),0)}function Cs(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return xs;var r=ks(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],o=e["padding-"+a];t[a]=Ts(o)}return t}(r),o=a.left+a.right,i=a.top+a.bottom,s=Ts(r.width),c=Ts(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=Is(r,"left","right")+o),Math.round(c+i)!==n&&(c-=Is(r,"top","bottom")+i)),!function(e){return e===ks(e).document.documentElement}(e)){var u=Math.round(s+o)-t,l=Math.round(c+i)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return Bs(a.left,a.top,s,c)}var Ss="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof ks(e).SVGGraphicsElement}:function(e){return e instanceof ks(e).SVGElement&&"function"==typeof e.getBBox};function Ms(e){return vs?Ss(e)?function(e){var t=e.getBBox();return Bs(0,0,t.width,t.height)}(e):Cs(e):xs}function Bs(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Os=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Bs(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Ms(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Ls=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(o.prototype);return bs(i,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),i}(t);bs(this,{target:e,contentRect:n})},Rs=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new hs,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof ks(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Os(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof ks(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Ls(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ds="undefined"!=typeof WeakMap?new WeakMap:new hs,Fs=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Es.getInstance(),r=new Rs(t,n,this);Ds.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Fs.prototype[e]=function(){var t;return(t=Ds.get(this))[e].apply(t,arguments)}}));var Us=void 0!==gs.ResizeObserver?gs.ResizeObserver:Fs,Ns="chat-widget-container",Ps={width:0,height:0},Qs=function(){var e=document.getElementById(Ns),t={width:(null==e?void 0:e.clientWidth)+32,height:(null==e?void 0:e.clientHeight)+32+64};if(Ps.height!==t.height||Ps.width!==t.width){var n={height:96,width:96},r=document.getElementById("close-icon"),a=document.getElementById("message-popups");if(!r&&!a)return Ps=n,Ye({type:"SET_IFRAME_SIZE",size:n});Ps=t,Ye({type:"SET_IFRAME_SIZE",size:{width:t.width<n.width?n.width:t.width,height:t.height<n.height?n.height:t.height}})}},Vs=new MutationObserver((function(){Qs()})),js=new Us((function(){Qs()})),Hs=function(e){var t,n;return Z(t=[e.key,e.code]).call(t,"Enter")||Z(n=[e.keyCode,e.which]).call(n,13)},Ws=(e("K",(function(e){return Hs(e)&&!e.shiftKey})),e("a0",(function(){var e=i(null),t=a((function(t){if(Hs(t)&&t.shiftKey){var n=e.current;se((function(){n.scrollTop=n.scrollHeight-n.clientHeight+40}))}}),[e]);return o((function(){var n=e.current;if(n)return n.addEventListener("keydown",t),function(){null==n||n.removeEventListener("keydown",t)}}),[e,t]),e}))),zs=function(e){var t,n,r,a,o,s,u,l,A=e.isOpen,d=e.hasPopupMessages,f=void 0!==d&&d,p=e.children,m=M.useLingui(),h=Ws(),v=Xi(),g=v.currentRoute,y=v.widgetPosition,w=v.isUserSettingsModalOpen,_="Chat"===g,E=i(A),b=!0===E.current?ms.closed:"";E.current=A;var k=Qr(t=Oe(n=Oe(r=Oe(a=Oe(o=Oe(s=Oe(u="\n    ".concat(ms.widget,"\n    ")).call(u,"left"===y?ms.widgetLeft:"","\n    ")).call(s,_||w?ms.noScroll:"","\n    ")).call(o,A?ms.opened:b,"\n    ")).call(a,f?ms.withPopups:"","\n    ")).call(r,!A&&f?ms.closedWithPops:"","\n    ")).call(n,A||f?"":ms.closedWithOutPops,"\n  ")).call(t);return c.createElement("div",{ref:h,id:Ns,className:k},c.createElement(c.Fragment,{key:null==m||null===(l=m.i18n)||void 0===l?void 0:l.locale},p))},Gs="styles_popupsWrapper__-Tzdq",qs="styles_popupsWrapperLeft__2gq_0",Ys="styles_bubbleClose__2V7OX",Ks="styles_closeButton__DpWpG",Zs="styles_bubbleMessage__4_qu2",Js="styles_popupButtons__ix5dC",Xs="styles_popupButtonsLeft__2t2oD",$s="styles_agentName__26_07",ec="styles_withAgent__6dmG_",tc="styles_popupText__23XLQ",nc=e("D",{popupButton:"popupButton_popupButton__gZ8Gx",popupButtonIfTooWhite:"popupButton_popupButtonIfTooWhite__2hK_u"}),rc=function(e){var t,n,r=e.text,a=e.handleClick,o=Xi().config,i=rr().track,s=function(){i("popup_button_click",{label:r}),a(r)};return c.createElement("button",{className:Oe(t="".concat(nc.popupButton," ")).call(t,cs(null==o||null===(n=o.styles)||void 0===n?void 0:n.mainColor)?nc.popupButtonIfTooWhite:""),onClick:s,onKeyPress:s,tabIndex:0},c.createElement("span",null,r))},ac="styles_container__3EAmv",oc="styles_profile__2Pzrb",ic="styles_loadingImage__2SHaZ",sc="styles_isPopup__14Rxf",cc=(e("ac",(function(e){var t=e.agents;return void 0!==t&&null!=t&&t.length?c.createElement("div",{className:ac,"data-testid":"agent-faces"},$(t).call(t,(function(e){var t;return c.createElement(cc,{key:Oe(t="".concat(e.avatarUrl,"-")).call(t,e.name),avatarUrl:e.avatarUrl})}))):null})),function(e){var t,n,a=e.avatarUrl,o=e.isPopup,i=r(!1),s=Ue(i,2),u=s[0],l=s[1],A=r(!1),d=Ue(A,2),f=d[0],p=d[1];return u?null:c.createElement("img",{className:Oe(t=Oe(n="".concat(oc," ")).call(n,f?"":ic," ")).call(t,o?sc:""),alt:"agent profile images",src:a,onError:function(){mr("livechatwidget_agent_profile_image_error",{url:a}),l(!0)},onLoad:function(){return p(!0)}})}),uc=function(e){var t,n,a,s=e.text,u=e.waitTime,l=e.id,A=e.defaultLanguage,d=void 0===A?"en":A,f=e.buttonsEnabled,p=void 0===f||f,m=e.buttons,h=e.agent,v=e.showSetting,g=void 0===v?"showOnce":v,y=r(!1),w=Ue(y,2),_=w[0],E=w[1],b=i(null),k=Xi(),x=k.isOpen,T=k.toggleWidgetOpenState,I=k.setAllCurrentPopupsAsSeen,C=k.dismissPopup,S=k.push,M=k.isPreviewMode,B=k.setSelectedPopup,O=k.setSelectedPopupButton,L=k.quickReplyButtons,R=k.setQuickReplyButtons,D=k.widgetPosition,F=dt("hasSeenMessagePopup",!1,l),U=F.storageState,N=F.setStorageState,P=!g||"showOnce"===g,Q=function(e){M||(e&&(B(l),O(e)),P&&N(!0),T(!0),S(Gn.Chat),I())},V=function(){M||(p&&null!=m&&m.length&&0===(null==L?void 0:L.length)&&R(m),B(l),P&&N(!0),T(!0),S(Gn.Chat),I())},j=function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),M||C(l)};return o((function(){if(x)return clearTimeout(b.current),void(b.current=null);var e=1e3*Ke(null==u?void 0:ln(u).call(u,0,-1));return b.current=se((function(){E(!0)}),e),function(){clearTimeout(b.current)}}),[x,u]),(x||!_||U&&P)&&!M?null:c.createElement(c.Fragment,null,c.createElement("div",{className:Oe(t="".concat(Zs," ")).call(t,h?ec:""),role:"button",tabIndex:0,onClick:V,onKeyPress:V},h&&c.createElement(cc,{avatarUrl:h.avatarUrl,isPopup:!0}),c.createElement("div",null,h&&c.createElement("p",{className:$s},h.name),c.createElement("span",{className:tc},s),c.createElement("div",{className:Ys},c.createElement("div",{"data-testid":"dismiss-button",role:"button",tabIndex:0,onClick:j,onKeyPress:j,className:Ks},c.createElement(Yn,{width:16,height:16,color:"#8192A8"}))))),p&&(null==m?void 0:m.length)>0&&c.createElement("div",{className:Qr(n=Oe(a="".concat(Js," ")).call(a,"left"===D?Xs:"")).call(n)},$(m).call(m,(function(e,t){return c.createElement(rc,{key:t,text:fo(e.message,d),handleClick:Q})}))))},lc=function(){var e,t,n=Xi(),r=n.config,a=n.messagePopups,o=n.isOpen,i=n.agents,s=n.widgetPosition,u=r.defaultLanguage||"en";if(0===(null==a?void 0:a.length)||o)return null;var l=Qr(e=Oe(t="".concat(Gs," ")).call(t,"left"===s?qs:"")).call(e);return c.createElement("div",{className:l,id:"message-popups"},$(a).call(a,(function(e){return c.createElement(uc,Pn({key:e.id,text:fo(e.templates,u),waitTime:e.waitTime,id:e.id,defaultLanguage:u,agent:i?i[0]:void 0},e))})))},Ac=function(){"visible"===document.visibilityState&&pr({type:"counter",name:"livechatwidget_app_version",method:"inc",labels:{version:window.livechat_version,loadType:"visibility"}})},dc=function(){document.removeEventListener("visibilitychange",Ac)},fc=wr((function(){return t.import("./index-chunk-nomodule-4ac1bb04.js")})),pc=function(){var e,t,n,a,s,l,A=Xi(),d=A.isOpen,f=A.config,m=A.toggleWidgetOpenState,h=A.newMessages,v=A.messagePopups,g=A.widgetPosition,y=A.setAllCurrentPopupsAsSeen,w=A.setIsUserSettingsModalOpen;n=r(document.getElementById(Ns)),a=Ue(n,2),s=a[0],l=a[1],o((function(){return s&&s===document.getElementById(Ns)?(Qs(),Vs.observe(s,{attributes:!0,childList:!0,subtree:!0}),js.observe(s)):l((function(){return document.getElementById(Ns)})),function(){s||(Vs.disconnect(),js.disconnect())}}),[s]);var _=rr().track;o((function(){return d&&document.addEventListener("visibilitychange",Ac),dc}),[d]);var E=function(e,t){var n=r(e),a=Ue(n,2),o=a[0],s=a[1],c=i(!1),u=i();return p((function(){u.current&&clearTimeout(u.current),e?(c.current=!0,s(e)):c.current&&(u.current=se((function(){s(e)}),t||700))}),[e,t]),c.current?o:e}(d,700),b=f.iconLogo||f.icon;return c.createElement("div",{className:Qr(e=Oe(t="".concat(fs," ")).call(t,"left"===g?ps:"")).call(e)},c.createElement(zs,{isOpen:d,hasPopupMessages:(null==v?void 0:v.length)>0},c.createElement(lc,null),E&&c.createElement(u,{fallback:null},c.createElement(fc,{isOpen:E}))),c.createElement(As,{icon:b,onClick:function(){m(),w(!1),_("widget_toggled"),mr("js_livechatwidget_widget_opened"),(null==v?void 0:v.length)>0&&!d&&y()},isOpen:d,messagesAmount:h}))},mc="styles_container__2dHBd",hc="styles_header__27NYl",vc="styles_wrapper__3EDTN",gc="styles_openStartButton__33cTS",yc=function(e){e.onClick;return c.createElement("div",{className:mc},c.createElement("div",{className:hc}),c.createElement("div",{className:vc},c.createElement(Jn,{width:32}),c.createElement("h2",null,"Whoops"),c.createElement("p",null,"Sorry! We were unable to load the chat"),c.createElement(jr,{onClick:function(){Ye({type:"RELOAD_IFRAME_AFTER_ERROR"})}},"Try again")),c.createElement("div",{className:gc},c.createElement(As,{isOpen:!0})))};function wc(e){var t=function(){if("undefined"==typeof Reflect||!La)return!1;if(La.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(La(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ha(e);if(t){var a=Ha(this).constructor;n=La(r,arguments,a)}else n=r.apply(this,arguments);return Va(this,n)}}var _c=function(e){Pa(n,e);var t=wc(n);function n(e){var r;return Ra(this,n),(r=t.call(this,e)).state={hasError:!1},r}return ni(n,[{key:"componentDidCatch",value:function(e,t){Ye({type:"SET_IFRAME_SIZE",size:{height:802,width:400}}),this.setState({hasError:!0}),nt(e,"cdc ".concat(null==e?void 0:e.message))}},{key:"render",value:function(){return this.state.hasError?c.createElement(yc,null):this.props.children}}]),n}(c.Component);!function(){var e;if(Z(e=["production","staging"]).call(e,"production")){I({ignoreErrors:["InvalidStateError: A mutation operation was attempted on a database that did not allow mutations.","SecurityError: IDBFactory.open() called in an invalid security context","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.","SecurityError: Failed to read the 'localStorage' property from 'Window': Access is denied for this document.","Error: The project's quota for this operation has been exceeded.","A network error (such as timeout, interrupted connection or unreachable host) has occurred.","UnhandledRejection: Non-Error promise rejection captured with value:","Extension context invalidated","auth/timeout","Cross-origin script load denied by Cross-Origin Resource Sharing policy","Blocked a frame with origin","Failed to fetch",/network/i,"Failed to import","Failed to fetch dynamically imported module","Importing a module script failed","Failed to get document because the client is offline","UnknownError: Connection to Indexed Database server lost. Refresh the page to try again","Missing or insufficient permissions.","Unexpected token","SecurityError","AuthError","AbortError","Load failed"],environment:"production",dsn:"https://a5f42b895f0f45b9804f529db1afd7ec@o113111.ingest.sentry.io/5264329",release:window.release,integrations:[new C]})}}(),Qi("initial"),function(e,t){var n,r=xi(),a=vi("LCP"),o=function(e){var t=e.startTime;t<r.firstHiddenTime&&(a.value=t,a.entries.push(e)),n()},i=gi("largest-contentful-paint",o);if(i){n=_i(e,a,t);var s=function(){Oi.has(a.id)||(i.takeRecords().map(o),i.disconnect(),Oi.add(a.id),n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,s,{once:!0,capture:!0})})),yi(s,!0),wi((function(r){a=vi("LCP"),n=_i(e,a,t),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-r.timeStamp,Oi.add(a.id),n(!0)}))}))}))}}(Vi("LCP")),function(e,t){var n,r=xi(),a=vi("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},i=gi("first-input",o);n=_i(e,a,t),i&&yi((function(){i.takeRecords().map(o),i.disconnect()}),!0),i&&wi((function(){var r;a=vi("FID"),n=_i(e,a,t),mi=[],fi=-1,di=null,Bi(addEventListener),r=o,mi.push(r),Si()}))}(Vi("FID")),function(){try{new hi((function(e){var t,n=Li(e.getEntriesByName("first-contentful-paint"));try{for(n.s();!(t=n.n()).done;){var r=t.value;pr({type:"histogram",method:"observe",name:"livechatwidget_FCP",buckets:Ui,value:Math.round(r.startTime),labels:{connectionType:Pi(),deviceType:Ni()}})}}catch(e){n.e(e)}finally{n.f()}})).observe({type:"paint",buffered:!0})}catch(e){}}();var Ec=function(){return c.createElement(_c,null,c.createElement($i,null,c.createElement(M.I18nProvider,{forceRenderOnLocaleChange:!1,i18n:S},c.createElement(pc,null))))};c.render(c.createElement(u,{fallback:c.createElement(As,{isOpen:!1})},c.createElement(Ec,null)),document.getElementById("app"))}}}));System.import('/js/index-nomodule-f6224ab8.js')
